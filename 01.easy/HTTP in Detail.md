[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)

# Комната [HTTP in Detail](https://tryhackme.com/r/room/httpindetail) 

Всего 7 заданий:
## Задание 1
Что такое HTTP ? (Протокол передачи гипертекста)

HTTP — это то, что используется всякий раз, когда вы просматриваете веб-сайт, разработанный Тимом Бернерсом-Ли и его 
командой в 1989-1991 годах. HTTP — это набор правил, используемых для связи с веб-серверами для передачи данных 
веб-страниц, будь то HTML, изображения, видео и т. д.  

Что такое HTTPS? (Безопасный протокол передачи гипертекста)

HTTPS — это защищенная версия HTTP. Данные HTTPS шифруются, поэтому это не только не позволяет другим видеть данные, 
которые вы получаете и отправляете, но и дает вам уверенность в том, что вы общаетесь с правильным веб-сервером, а 
не с чем-то, выдающим себя за него.  

### Ответить на вопросы ниже
Что означает HTTP?
HyperText Transfer Protocol
```commandline
Ответ не нужен
```
Что означает буква S в аббревиатуре HTTPS?
```commandline
secure
```
На макете веб-страницы справа есть проблема, как только вы ее найдете, нажмите на нее. Что такое флаг вызова?
```commandline
THM{INVALID_HTTP_CERT}
```

## Задание 2
Когда мы заходим на веб-сайт, ваш браузер должен будет делать запросы к веб-серверу для таких ресурсов, как HTML, 
изображения, и загружать ответы. Перед этим вам нужно указать браузеру, как и где получить доступ к этим ресурсам, и 
здесь вам помогут URL.  

### Что такое URL? (унифицированный указатель ресурсов)

Если вы пользовались интернетом, вы уже пользовались URL. URL — это преимущественно инструкция о том, как получить 
доступ к ресурсу в интернете. На изображении ниже показано, как выглядит URL со всеми его функциями (он не 
использует все функции в каждом запросе).  

Диаграмма, показывающая различные части URL на примере, где http — схема, user:password — пользователь, tryhackme.
com — домен или хост, 80 — порт, view-room — путь, ?id=1 — строка запроса, а #task3 — фрагмент. Полный адрес — 
http://user:password@tryhackme.com:80/view-room?id=1#task3.  

Схема: здесь указывается, какой протокол использовать для доступа к ресурсу, например HTTP, HTTPS, FTP (протокол 
передачи файлов). 

Пользователь: Некоторые службы требуют аутентификации для входа в систему. Для входа в систему вы можете указать имя 
пользователя и пароль в URL-адресе. 

Хост: Доменное имя или IP-адрес сервера, к которому вы хотите получить доступ.

Порт: порт, к которому вы собираетесь подключиться, обычно 80 для HTTP и 443 для HTTPS, но его можно разместить на 
любом порту от 1 до 65535. 

Путь: Имя файла или местоположение ресурса, к которому вы пытаетесь получить доступ.

Строка запроса: Дополнительные биты информации, которые могут быть отправлены по запрошенному пути. Например, /blog? 
id=1 сообщит пути блога, что вы хотите получить статью блога с идентификатором 1. 

Фрагмент: это ссылка на местоположение на запрошенной странице. Обычно используется для страниц с длинным содержимым 
и может иметь конкретную часть страницы, напрямую связанную с ним, поэтому она становится видимой для пользователя, 
как только он получает доступ к странице.  

### Сделать запрос

Можно сделать запрос к веб-серверу всего одной строкой « GET / HTTP /1.1 ».


Но для более богатого веб-опыта вам нужно будет отправлять и другие данные. Эти другие данные отправляются в так 
называемых заголовках, где заголовки содержат дополнительную информацию для передачи веб-серверу, с которым вы 
общаетесь, но мы рассмотрим это подробнее в задаче «Заголовок».  

Пример запроса:
```commandline
GET / HTTP/1.1
Host: tryhackme.com
User-Agent: Mozilla/5.0 Firefox/87.0
Referer: https://tryhackme.com/
```
 
Разберем каждую строку этого запроса:

Строка 1: Этот запрос отправляет метод GET (подробнее об этом в задаче «Методы HTTP» ), запрашивает домашнюю 
страницу с помощью / и сообщает веб-серверу, что мы используем протокол HTTP версии 1.1. 

Строка 2: Мы сообщаем веб-серверу, что нам нужен сайт tryhackme.com

Строка 3: Мы сообщаем веб-серверу, что используем браузер Firefox версии 87.

Строка 4: Мы сообщаем веб-серверу, что веб-страница, которая перенаправила нас на эту страницу, — https://tryhackme.com

Строка 5: HTTP- запросы всегда заканчиваются пустой строкой, чтобы сообщить веб-серверу о завершении запроса.

Пример ответа:
```commandline
HTTP/1.1 200 OK
Server: nginx/1.15.8
Date: Fri, 09 Apr 2021 13:34:03 GMT
Content-Type: text/html
Content-Length: 98

<html>
<head>
    <title>TryHackMe</title>
</head>
<body>
    Welcome To TryHackMe.com
</body>
</html>
```

Разберем каждую строку ответа:

Строка 1: HTTP 1.1 — версия протокола HTTP, используемая сервером, за которой следует код состояния HTTP, в данном 
случае «200 Ok», который сообщает нам, что запрос выполнен успешно. 

Строка 2: Здесь указывается программное обеспечение веб-сервера и номер версии.

Строка 3: Текущая дата, время и часовой пояс веб-сервера.

Строка 4: Заголовок Content-Type сообщает клиенту, какой тип информации будет отправлен, например HTML, изображения, 
видео, PDF, XML. 

Строка 5: Content-Length сообщает клиенту длину ответа, таким образом мы можем подтвердить, что все данные присутствуют.

Строка 6: HTTP- ответ содержит пустую строку для подтверждения окончания HTTP- ответа.

Строки 7–14: запрошенная информация, в данном случае — домашняя страница.

### Ответить на вопросы ниже
Какой протокол HTTP используется в приведенном выше примере?

```commandline
HTTP/1.1
```
Какой заголовок ответа сообщает браузеру, какой объем данных ожидать?
```commandline
Content-Length
```

## Задание 3
Методы HTTP — это способ для клиента показать предполагаемое действие при выполнении запроса HTTP. Существует 
множество методов HTTP, но мы рассмотрим наиболее распространенные, хотя в основном вы будете иметь дело с методами 
GET и POST.  

ПОЛУЧИТЬ запрос

Используется для получения информации с веб-сервера.

Запрос POST

Используется для отправки данных на веб-сервер и потенциального создания новых записей.

Запрос PUT

Используется для отправки данных на веб-сервер для обновления информации.

Запрос на УДАЛИТЬ

Используется для удаления информации/записей с веб-сервера.

### Ответить на вопросы ниже
Какой метод будет использоваться для создания новой учетной записи пользователя?
```commandline
POST
```
Какой метод будет использоваться для обновления вашего адреса электронной почты?
```commandline
PUT
```
Какой метод будет использоваться для удаления фотографии, загруженной вами в аккаунт?
```commandline
DELETE
```
Какой метод будет использоваться для просмотра новостной статьи?
```commandline
GET
```

## Задание 4
Коды статуса HTTP :
В предыдущем задании вы узнали, что когда HTTP- сервер отвечает, первая строка всегда содержит код статуса, 
информирующий клиента о результате его запроса, а также потенциально о том, как его обрабатывать. Эти коды статуса 
можно разбить на 5 различных диапазонов:  

- 100-199 - Информационный ответ	Они отправляются, чтобы сообщить клиенту, что первая часть его запроса принята, и 
ему следует продолжить отправку остальной части своего запроса. Эти коды больше не очень распространены.
- 200-299 - Успех	Этот диапазон кодов статуса используется для того, чтобы сообщить клиенту, что его запрос был 
  успешным.
- 300-399 - Перенаправление	Они используются для перенаправления запроса клиента на другой ресурс. Это может быть 
  как другая веб-страница, так и вообще другой веб-сайт.
- 400-499 — Ошибки клиента	Используется для информирования клиента об ошибке при выполнении его запроса.
- 500-599 — Ошибки сервера	Это зарезервировано для ошибок, возникающих на стороне сервера, и обычно указывает на 
довольно серьезную проблему с обработкой запроса сервером. 
Распространенные коды статуса HTTP :

Существует множество различных кодов состояния HTTP, и это не считая того, что приложения могут определять свои 
собственные. Мы рассмотрим наиболее распространенные ответы HTTP, с которыми вы, вероятно, столкнетесь: 

- 200 - ОК	Запрос был успешно выполнен.
- 201 - Создано	Создан ресурс (например, новый пользователь или новая запись в блоге).
- 301 - Перемещено навсегда	Это перенаправляет браузер клиента на новую веб-страницу или сообщает поисковым системам,
что страница перемещена в другое место и что нужно поискать там. 
- 302 - Найдено	Похоже на постоянное перенаправление, описанное выше, но, как следует из названия, это лишь 
временное изменение, и оно может снова измениться в ближайшем будущем. 
ошибка 400, неверный запрос	Это сообщает браузеру, что в запросе что-то было не так или отсутствовало. Иногда это 
можно использовать, если запрашиваемый ресурс веб-сервера ожидал определенный параметр, который клиент не отправил. 
- 401 — Не авторизовано	В настоящее время вам не разрешено просматривать этот ресурс, пока вы не авторизуетесь в 
веб-приложении, чаще всего с помощью имени пользователя и пароля. 
- 403 - Запрещено	У вас нет разрешения на просмотр этого ресурса, независимо от того, вошли ли вы в систему или нет.
- 405 — Метод не разрешен	Ресурс не допускает этот метод запроса. Например, вы отправляете запрос GET к ресурсу 
/create-account, когда вместо этого ожидался запрос POST. 
- 404 Страница не найдена	Запрошенная вами страница/ресурс не существует.
- 500 — Внутренняя ошибка службы	Сервер обнаружил какую-то ошибку при обработке вашего запроса, и он не знает, 
  как ее правильно обработать.
- 503 Сервис недоступен	
Этот сервер не может обработать ваш запрос, так как он перегружен или отключен на техническое обслуживание.

Нажмите кнопку «Просмотреть сайт» справа, чтобы увидеть, как некоторые из этих сообщений о состоянии HTTP выглядят в 
браузере. 

### Ответить на вопросы ниже
Какой код ответа вы можете получить, если создали нового пользователя или статью в блоге?
```commandline
201
```
Какой код ответа вы можете получить, если попытаетесь получить доступ к несуществующей странице?
```commandline
404
```
Какой код ответа вы можете получить, если веб-сервер не может получить доступ к своей базе данных и приложение 
аварийно завершает работу? 
```commandline
503
```
Какой код ответа вы можете получить, если попытаетесь отредактировать свой профиль без предварительной авторизации?
```commandline
401
```

## Задание 5
Заголовки — это дополнительные биты данных, которые вы можете отправлять на веб-сервер при выполнении запросов.

Хотя при выполнении HTTP- запроса заголовки не являются строго обязательными , вам будет сложно просматривать 
веб-сайт должным образом. 

### Общие заголовки запросов

Это заголовки, которые отправляются клиентом (обычно вашим браузером) на сервер.

`Хост`: Некоторые веб-серверы размещают несколько веб-сайтов, поэтому, предоставляя заголовки хоста, вы можете указать,
какой из них вам нужен, в противном случае вы просто получите веб-сайт по умолчанию для сервера. 

`User-Agent`: это программное обеспечение вашего браузера и номер версии, сообщающие веб-серверу, что программное 
обеспечение вашего браузера помогает ему правильно форматировать веб-сайт для вашего браузера, а также что некоторые 
элементы HTML, JavaScript и CSS доступны только в определенных браузерах.  

`Content-Length`: При отправке данных на веб-сервер, например, в форме, длина контента сообщает веб-серверу, сколько 
данных ожидать в веб-запросе. Таким образом, сервер может гарантировать, что не пропустит никаких данных. 

`Accept-Encoding`: сообщает веб-серверу, какие типы методов сжатия поддерживает браузер, чтобы можно было уменьшить 
размер данных для передачи через Интернет. 


`Файл cookie`: данные, отправляемые на сервер для запоминания вашей информации (для получения дополнительной 
информации см. раздел «Задача файлов cookie»). 
Общие заголовки ответов

### Это заголовки, которые сервер возвращает клиенту после запроса.

`Set-Cookie`: информация для хранения, которая отправляется обратно на веб-сервер при каждом запросе (для получения 
дополнительной информации см. задачу cookie). 

`Cache-Control`: как долго хранить содержимое ответа в кэше браузера, прежде чем он запросит его снова.

`Content-Type`: сообщает клиенту, какой тип данных возвращается, т. е. HTML, CSS, JavaScript, изображения, PDF, видео 
и т. д. Используя заголовок content-type, браузер узнает, как обрабатывать данные. 

Кодирование содержимого: какой метод использовался для сжатия данных с целью уменьшения их размера при отправке 
через Интернет. 

### Ответить на вопросы ниже
Какой заголовок сообщает веб-серверу, какой браузер используется?
```commandline
User-Agent
```
Какой заголовок сообщает браузеру, какой тип данных возвращается?
```commandline
Content-Type
```
Какой заголовок сообщает веб-серверу, какой веб-сайт запрашивается?
```commandline
Host
```
## Задание 6
Вы, вероятно, слышали о куки раньше, это всего лишь небольшой фрагмент данных, который хранится на вашем компьютере. 
Куки сохраняются, когда вы получаете заголовок "Set-Cookie" от веб-сервера. Затем каждый последующий запрос, который 
вы делаете, вы отправляете данные куки обратно на веб-сервер. Поскольку HTTP не сохраняет состояние (не отслеживает 
ваши предыдущие запросы), куки могут использоваться, чтобы напомнить веб-серверу, кто вы, какие-то персональные 
настройки для веб-сайта или были ли вы на этом веб-сайте раньше. Давайте рассмотрим это как пример HTTP- запроса:

Диаграмма, наглядно демонстрирующая, как файлы cookie внедряются в http-запросы для сохранения информации о 
пользователе. 

Файлы cookie могут использоваться для многих целей, но чаще всего они используются для аутентификации веб-сайтов. 
Значение файла cookie обычно не будет строкой открытого текста, в которой вы можете увидеть пароль, а токеном 
(уникальным секретным кодом, который нелегко угадать человеку).  

Просмотр ваших файлов cookie

Вы можете легко просмотреть, какие файлы cookie ваш браузер отправляет на веб-сайт, используя инструменты 
разработчика в вашем браузере. Если вы не уверены, как получить доступ к инструментам разработчика в вашем браузере, 
нажмите кнопку «Просмотр сайта» в верхней части этой задачи для получения руководства.  

Открыв инструменты разработчика, щелкните вкладку «Сеть». На этой вкладке будет показан список всех ресурсов, 
запрошенных вашим браузером. Вы можете щелкнуть по каждому из них, чтобы получить подробную разбивку запроса и 
ответа. Если ваш браузер отправил файл cookie, вы увидите их на вкладке «Файлы cookie» запроса.  

### Ответить на вопросы ниже
Какой заголовок используется для сохранения файлов cookie на вашем компьютере?
```commandline
Set-Cookie
```

## Задание 7
Нажмите кнопку «Просмотр сайта» справа.

Это эмулятор для создания демонстрационных HTTP-запросов. Используя полученные знания при выполнении приведенных 
выше задач, вы можете использовать его для решения приведенных ниже вопросов. 

### Ответить на вопросы ниже
Сделайте запрос GET к /room
```commandline
THM{YOU'RE_IN_THE_ROOM}
```
Сделайте запрос GET к /blog и с помощью значка шестеренки установите параметр id равным 1 в поле URL.
```commandline
THM{YOU_FOUND_THE_BLOG}
```
Сделайте запрос DELETE для /user/1
```commandline
THM{USER_IS_DELETED}
```
Сделайте запрос PUT к /user/2, установив параметр username на admin.
```commandline
THM{USER_HAS_UPDATED}
```
Отправьте имя пользователя thm и пароль letmein в /login
```commandline
THM{HTTP_REQUEST_MASTER}
```
[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)