[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)

# Комната [Badbyte](https://tryhackme.com/r/room/badbyte) 

Всего 6 заданий:
## Задание 1
Разверните виртуальную машину .
### Ответьте на вопросы ниже
Подождите 2–3 минуты, пока виртуальная машина загрузится.

```commandline
Ответ не нужен
```

## Задание 2
Nmap — это бесплатный инструмент с открытым исходным кодом, используемый для обнаружения хостов и служб в 
компьютерной сети путем отправки пакетов и анализа полученных ответов. В этой задаче  nmapбудет использоваться для 
перечисления открытых портов и служб, запущенных на машине. Посетите комнату Nmap для получения дополнительной 
информации об этом!   


Вывод в трех основных форматах одновременно
--скрипт
`nmap --script http-sql-injection MACHINE_IP`

Сканирование одним скриптом. Пример проверки на SQL-инъекции
`nmap --script snmp-sysdescr --script-args snmpcommunity=admin MACHINE_IP`

Скрипт NSE с аргументами


В этом задании:

 Сначала просканируйте, какие порты открыты на компьютере: `nmap -p- -vv MACHINE_IP`
 Затем, найдя номер порта, перечислите, какие службы запущены на этом порту:
`nmap -A -p port1,port2,port3 MACHINE_IP`
### Ответьте на вопросы ниже
Сколько портов открыто?
```commandline
2
```
Какая служба работает на самом нижнем открытом порту?
```commandline
ssh
```
Какой нестандартный порт открыт?
```commandline
30024
```
Какая служба работает на нестандартном порту?
```commandline
ftp
```

## Задание 3
John the Ripper — это инструмент с открытым исходным кодом для аудита безопасности паролей и восстановления паролей, 
доступный для многих операционных систем. 

Посетите Crackthehash или Crackthehash2 для получения дополнительной информации о взломе хешей.

Чтобы взломать закрытый ключ SSH, сначала используйте скрипт Python ssh2john , преобразующий закрытый ключ в хэш (он 
входит в состав Kali Linux . Запустите locate ssh2john). 

`python path/to/ssh2john.py privatekey > privatekey.hash`

Затем используйте Джона, чтобы взломать хэш.

`john privatekey.hash -w=/path/to/wordlist`

Взломайте парольную фразу закрытого ключа и SSH- подключитесь к машине. Обязательно измените права доступа к файлу 
закрытого ключа SSH на 600. 

### Ответьте на вопросы ниже
Какое имя пользователя мы находим в процессе перечисления?
```commandline
errorcauser
```
Какова парольная фраза для закрытого ключа RSA?
```commandline
cupcake
```

## Задание 4
Согласно Wikipedia , SSH или Secure Shell — это криптографический сетевой протокол для безопасной эксплуатации сетевых служб в незащищенной сети. Типичные приложения включают удаленную командную строку, вход в систему и удаленное выполнение команд, но любая сетевая служба может быть защищена с помощью SSH .

Ниже приведены некоторые важные флаги, которые будут использоваться в этой задаче.


На рисунке выше пользователь с синего сервера хочет подключиться к порту 80 на красном сервере, но порт заблокирован брандмауэром. Пользователь может подключиться через ssh и создать туннель, который позволит ему подключиться к порту 80 на красном сервере. В этом случае пользователь может использовать локальную переадресацию портов, чтобы подключить порт на красном сервере к своей локальной машине.

Для выполнения этой задачи:

Настройте динамическую переадресацию портов с помощью SSH .
ПОДСКАЗКА: `-i id_rsa -D 1337`
Настройте proxychains для динамической переадресации портов . Убедитесь, что вы закомментировали socks4 127.0.0.1 
9050 конфигурацию proxychains и добавьте socks5 127.0.0.1 1337 в конец файла конфигурации ( `/etc/proxychains.conf`).
Имя файла может отличаться в зависимости от используемого вами дистрибутива.

Запустите сканирование портов, чтобы перечислить внутренние порты на сервере с помощью proxychains. Если вы 
используете Nmap, ваша команда должна выглядеть так `proxychains nmap -sT 127.0.0.1`. 
После нахождения порта веб-сервера выполните локальную переадресацию портов на этот порт с помощью SSH с флагом -L .
ПОДСКАЗКА : `-i id_rsa -L 80:127.0.0.1:(remote port)`(Попробуйте использовать с sudo)

### Ответьте на вопросы ниже
Какие основные TCP-порты прослушиваются на локальном хосте?
```commandline
80,3306
```
Какие протоколы используются для этих портов?
```commandline
http, mysql
```

## Задание 5
Используйте nmap для сканирования уязвимости в CMS, которая работает на веб-сервере. Nmap имеет скрипт, который 
может находить уязвимости в CMS , которая используется на этой машине. 

Теперь, когда вы локально перенаправили порт, веб-сервер работает на локальном хосте, и вы можете получить к нему 
доступ из своего браузера. 

В этом задании:
- Просканируйте внутренний веб-сервер и найдите уязвимые плагины с помощью Nmap или популярного инструмента 
  сканирования для этой CMS. 
- Воспользуйтесь уязвимостью, используя Metasploit или следуя любому POC (доказательству концепции).
Получите флаг пользователя.
### Ответьте на вопросы ниже
Какая CMS работает на машине?
```commandline
wordpress
```
Можете ли вы найти какие-либо уязвимые плагины?
```commandline
Ответ не нужен
```
Каков номер CVE для уязвимости обхода каталогов ?
```commandline
CVE-2020-11738
```
Какой номер CVE у уязвимости удаленного выполнения кода ?
```commandline
CVE-2020-25213
```
Для эксплойта есть модуль metasploit. Вы можете использовать его для получения обратного шелла. Если вам повезет, вы 
можете следовать любому POC (Proof of Concept). 
```commandline
Ответ не нужен
```
Каково имя пользователя, запустившего CMS?
```commandline
cth
```
Что такое флаг пользователя?
```commandline
THM{227906201d17d9c45aa93d0122ea1af7}
```
## Задание 6
Пароли — довольно простая концепция, и они могут быть эффективным способом защиты конфиденциальной информации. 
Обеспечение доступа к определенному ресурсу только тем, кто знает «секретный код», помогает поднять планку для 
злоумышленников, пытающихся получить незаконный доступ. Однако пароли определенно могут быть утеряны или украдены, 
особенно если они плохо защищены.   
Иногда пользователь может повторно использовать тот же пароль или немного изменить свой пароль после утечки данных. 
Например, он может изменить его с "Goodpassword2019" на "Goodpassword2020" или с "Autumn20!" на "Spring20!". Если 
злоумышленник получит в руки старый дамп базы данных компании и найдет закономерность в используемых паролях, он 
сможет угадать правильный пароль.   

В этом задании:
- Обнаружил, что пользователь где-то случайно оставил пароль. Теперь руководство требует, чтобы сеансы SSH 
регистрировались.
- Угадайте новый пароль пользователя.
Получите корневой флаг.
```commandline
________________________ 
< Сделано с ❤ BadByte > 
------------------------ 
        \ ^__^ 
         \ (oo)\_______ 
            (__)\ )\/\ 
                ||----w | 
                || ||
```

### Ответьте на вопросы ниже
Какой старый пароль у пользователя ?
```commandline
G00dP@$sw0rd2020
```
Что такое корневой флаг?
```commandline
THM{ad485b44f63393b6a9225974909da5fa}
```
[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)