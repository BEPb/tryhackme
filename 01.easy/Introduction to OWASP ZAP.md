[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)

# Комната [Introduction to OWASP ZAP](https://tryhackme.com/r/room/learnowaspzap) 

Всего 10 заданий:
## Задание 1
OWASP Zap — это фреймворк для тестирования безопасности, очень похожий на Burp Suite . Он действует как очень 
надежный инструмент перечисления. Он используется для тестирования веб-приложений. 


#### Почему бы мне не использовать Burp Suite ?

ХОРОШИЙ вопрос! Большинство людей в сообществе Info-sec просто используют Burp Suite. Но у OWASP ZAP есть несколько 
преимуществ и функций, которых нет у Burp Suite , и это моя любимая программа из двух.  

Каковы преимущества OWASP  ZAP ?

Он полностью с открытым исходным кодом и бесплатен. Нет премиум-версии, нет функций, заблокированных платным 
доступом, и нет проприетарного кода. 
Использование OWASP ZAP по сравнению с Burp Suite имеет ряд преимуществ :
- Автоматизированное сканирование веб-приложений: автоматически пассивно и активно сканирует веб-приложение, 
   создает карту сайта и обнаруживает уязвимости. Это платная функция в Burp. 
- Web Spidering: Вы можете пассивно построить карту веб-сайта с помощью Spidering. Это платная функция в Burp.
- Unthrottled Intruder: Вы можете взломать страницы входа в OWASP так быстро, как это может сделать ваша машина и 
  веб-сервер. Это платная функция в Burp. 
- Нет необходимости пересылать отдельные запросы через Burp: при ручных атаках необходимость менять окна для 
  отправки запроса через браузер, а затем пересылать в Burp может быть утомительной. OWASP обрабатывает оба, и вы 
  можете просто просматривать сайт, а OWASP автоматически перехватит. Это НЕ функция Burp.   



Если вы уже знакомы с Burp, ключевые слова переводятся следующим образом:




Это руководство научит вас, как делать следующее в ZAP : 
- Автоматическое сканирование
- Каталог Bruteforce
- Аутентифицированное сканирование
- Страница входа Bruteforce
- Установить расширения ZAP

В этой комнате будет использоваться OWASP Zap против машины DVWA. Не стесняйтесь развертывать свой собственный 
экземпляр и следуйте инструкциям. 

### Ответьте на вопросы ниже
Что означает ZAP?
```commandline
Zed Attack Proxy
```

## Задание 2
ZAP — отличный инструмент, который полностью провалился, и лично я предпочитаю его Burp, но документация и поддержка 
этого инструмента микроскопичны по сравнению с таким титаном, как Burp.  


Burp имеет некоторые расширения и функции, которых нет у ZAP, например, ZAP не может выполнять атаки по времени 
входа. Burp может. Если вы хотите узнать больше об атаках по времени входа, вы можете посетить комнату TryHackMe 
Hackernote.  


ZAP можно использовать как инструмент для начала тестирования веб-приложений, но он не должен быть единственным 
инструментом. ZAP — это всего лишь один из многих инструментов, которые можно положить в свой хакерский арсенал.  

### Ответьте на вопросы ниже
Я прочитал задание.
```commandline
Ответ не нужен
```

## Задание 3
OWASP ZAP имеет удобный установщик для систем Windows, Mac OS и Linux .

Загрузите и установите его с официального сайта:  https://www.zaproxy.org/download/

### Ответьте на вопросы ниже
Установите ZAP на операционную систему по вашему выбору!
```commandline
Ответ не нужен
```
Откройте OWASP ZAP и приготовьтесь следить за этой комнатой.
```commandline
Ответ не нужен
```

## Задание 4
Давайте выполним автоматическое сканирование. Нажмите большую кнопку Автоматическое сканирование и введите цель.


Автоматическое сканирование выполняет как пассивное, так и автоматическое сканирование для создания карты сайта и 
обнаружения уязвимостей. 


На следующей странице вы увидите варианты выбора использования «традиционного паука» или «паука Ajax».

Традиционное сканирование пауком — это пассивное сканирование, которое перечисляет ссылки и каталоги веб-сайта. Оно 
создает индекс веб-сайта без грубой силы. Это намного тише, чем атака грубой силой, и все еще может выудить страницу 
входа или другие пикантные детали, но не так всеобъемлюще, как грубая сила.  

Ajax Spider — это дополнение, которое интегрирует в ZAP сканер сайтов с AJAX-насыщенностью под названием Crawljax. 
Вы можете использовать его вместе с традиционным пауком для получения лучших результатов. Он использует ваш 
веб-браузер и прокси.  

Самый простой способ использовать Ajax Spider — с HTMLUnit. 

Для установки HTML Unit используйте команду

sudo apt установить libjenkins-htmlunit-core-js-java

Затем выберите HtmlUnity из раскрывающегося списка Ajax Spider. 


Обе утилиты можно дополнительно настроить в меню параметров (Ctrl+Alt+O).

Пример вывода автоматического сканирования:

С помощью минимальной настройки мы смогли провести автоматическое сканирование, которое предоставило нам карту сайта 
и несколько уязвимостей.  

### Ответьте на вопросы ниже
Настройте Ajax Spider
```commandline
Ответ не нужен
```

## Задание 5
Давайте выполним ручное сканирование машины DVWA.


Как и Burp, вам следует настроить прокси-сервер между OWASP  ZAP и вашим браузером. Мы будем использовать Firefox. 

=============================================== ===========

 Настройка прокси-сервера OWASP :


Открыть параметры


Измените настройки локального прокси-сервера на указанные выше. 

=============================================== ===========

Добавить сертификаты ZAP :

Без импорта сертификатов ZAP ZAP не сможет обрабатывать одновременную пересылку и перехват веб-запросов. Не 
пропускайте этот шаг.  




В том же меню параметров перейдите в раздел «Динамические SSL-сертификаты» и сохраните сертификат в месте, которое 
вы запомните и не сможете удалить. 


Затем откройте Firefox, перейдите к своим настройкам, найдите сертификаты и нажмите «Просмотреть сертификаты». 


Затем нажмите «Импорт», а затем перейдите к ранее загруженному сертификату и откройте его. 



Выберите оба варианта и нажмите «ОК».

=============================================== ===========

Настройка прокси-сервера Firefox :

Вернитесь к настройкам Firefox и найдите «прокси». Нажмите «Настройки».

Настройте ручную конфигурацию прокси-сервера соответствующим образом, а затем нажмите «ОК». 

Теперь вы готовы! Пора приступить к самому интересному :)
### Ответьте на вопросы ниже
Какой IP мы используем для прокси?            
```commandline
127.0.0.1
```
## Задание 6
Без аутентификации вашего приложения Zap оно не сможет сканировать страницы, доступные только после входа в систему. 
Давайте настроим приложение OWASP ZAP для сканирования этих страниц, используя сеанс входа в систему. 


Давайте перейдем к машине DVWA ( http://MACHINE_IP ) и войдем в систему, используя следующие учетные данные:

Имя пользователя : admin
Пароль : пароль 



После входа в систему вы должны увидеть это. 



Для выполнения этого упражнения после входа в систему перейдите на вкладку «Безопасность DVWA» и установите уровень 
безопасности на «Низкий», а затем нажмите «Отправить». 


Мы собираемся передать наш токен аутентификации в ZAP, чтобы иметь возможность использовать этот инструмент для 
сканирования аутентифицированных веб-страниц. 




Введите элемент проверки и запишите свой файл cookie PHPSESSION. 



В ZAP откройте вкладку «Сеансы HTTP» с помощью кнопки «Новая вкладка» и установите аутентифицированный сеанс как 
активный. 


Теперь просканируйте приложение еще раз. Вы увидите, что оно может собирать гораздо больше. Это потому, что оно 
может видеть все разделы DVWA, которые ранее были за страницей входа.  

### Ответьте на вопросы ниже
Попробуйте просканировать веб-приложение DVWA как аутентифицированный пользователь.


```commandline
Ответ не нужен
```

## Задание 7
Если пассивного сканирования недостаточно, можно использовать атаку по списку слов и подбор каталогов через ZAP , 
как и в случае с gobuster. Это позволит выбрать страницы, которые не проиндексированы. 



Сначала. Перейдите в параметры ZAP (в нижней навигационной панели с помощью кнопки «плюс» на экране), перейдите в 
раздел «Принудительный просмотр» и добавьте «Пользовательский список слов». Вы также можете добавить больше потоков 
и отключить рекурсивный перебор.  


Затем щелкните правой кнопкой мыши по сайту->атака->принудительный просмотр сайта.


Выберите импортированный список слов из меню списка, а затем нажмите кнопку воспроизведения! Мы рекомендуем 
использовать этот список слов для этого упражнения. 


Теперь ZAP выполнит брутфорс всего сайта с использованием вашего списка слов.

### Ответьте на вопросы ниже
Попробуйте взломать веб-приложение DVWA методом подбора пароля.


```commandline
Ответ не нужен
```

## Задание 8
Давайте взломаем форму, чтобы получить учетные данные. Хотя мы уже знаем учетные данные, давайте посмотрим, сможем 
ли мы использовать Zap для получения учетных данных с помощью атаки методом перебора. 


Если бы вы хотели сделать это с помощью BurpSuite, вам пришлось бы перехватить запрос, а затем передать его Hydra . 
Однако этот процесс намного проще с ZAP ! 


Перейдите на страницу Brute Force на DVWA и попробуйте войти как «admin» с паролем «test123».



Затем найдите запрос GET и откройте меню Fuzz.


Затем выделите пароль, который вы пробовали, и добавьте список слов. Это выделит область запроса, которую вы хотите 
заменить другими данными.  


Для ускорения можно использовать fasttrack.txt, который находится в /usr/share/wordlists, если вы используете Kali Linux. 



После запуска фаззера отсортируйте вкладку состояния, чтобы сначала показать результаты Reflected. Иногда вы будете 
получать ложные срабатывания, но вы можете игнорировать пароли, длина которых меньше 8 символов. 

### Ответьте на вопросы ниже
Используйте ZAP для взлома страницы DVWA ' brute-force' . Какой пароль?
```commandline
password
```

## Задание 9
Хотите еще больше расширить возможности ZAP? Посмотрите на некоторые из его загружаемых расширений!

https://github.com/zaproxy/zap-extensions

https://github.com/bugcrowd/HUNT


Давайте установим расширения bugcrowd HUNT для OWASP  ZAP . Это будет пассивно сканировать известные уязвимости в 
веб-приложениях.



Сначала перейдите в терминале туда, где вы хотели бы сохранить скрипты.
` git-клон https://github.com/bugcrowd/HUNT `


Затем в ZAP нажмите значок «Управление надстройками».


Из Marketplace установите «Python Scripting» и «Community Scripts».


В параметрах ZAP в разделе «Пассивный сканер» убедитесь, что включен параметр «Сканировать только сообщения в 
области». Затем нажмите «ОК». 


В ZAP откройте вкладку «Скрипты».


И в разделе «Пассивные правила» найдите и включите скрипт HUNT.py.


Теперь, когда вы просматриваете сайты, HUNT будет пассивно сканировать на наличие SQLi, LFI, RFI, SSRF и других. 
Захватывающе! 

### Ответьте на вопросы ниже
Настройте HUNT в приложении Zap для автоматического выполнения пассивного сканирования посещаемых вами сайтов!
```commandline
Ответ не нужен
```

## Задание 10
В заключение, в комнате было дано всестороннее понимание OWASP  ZAP, от его установки до продвинутых методов, таких 
как автоматическое и ручное сканирование. Мы научились выявлять уязвимости и потенциальные эксплойты в 
веб-приложениях с помощью практических упражнений. Изучение аутентификации в сочетании с брутфорсингом веб-каталогов 
расширило наши знания о рисках безопасности и важности надежных механизмов аутентификации.   

Кроме того, мы обсудили расширения ZAP, которые могут дать нам возможность улучшить наши возможности сканирования и 
решать уникальные проблемы безопасности. По мере того, как мы размышляем над комнатой, становится очевидным, что 
обеспечение безопасности веб-приложений действительно является многогранной задачей, требующей усердия и 
тщательности в выявлении и устранении уязвимостей. Пентестер должен оставаться бдительным и продолжать изучать все 
возможности для эксплуатации и тестирования защиты от угроз.    

Поделитесь своими мыслями об этой комнате на нашем канале Discord или в аккаунте X. Увидимся.

### Ответьте на вопросы ниже
Ознакомьтесь с дополнительными материалами для чтения.
```commandline
Ответ не нужен
```
[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)