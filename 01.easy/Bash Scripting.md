[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)

# Комната [Bash Scripting](https://tryhackme.com/r/room/bashscripting) 

Всего 7 заданий:
## Задание 1
     Добро пожаловать в вводный курс по написанию скриптов на bash!
### Что такое Баш?

Bash — это скриптовый язык, работающий в терминале большинства дистрибутивов Linux , а также MacOS. Скрипты оболочки 
— это последовательность команд bash в файле, объединенных вместе для выполнения более сложных задач, чем простые 
однострочные, и они особенно полезны, когда речь идет об автоматизации задач системного администратора, таких как 
резервное копирование.   

Вот лишь некоторые из вещей, которые вы узнаете в этой комнате:
- Синтаксис Bash
- Переменные
- Использование параметров
- Массивы
- условные предложения


В этой комнате не стесняйтесь работать вместе со мной! Вы можете протестировать показанные команды или интегрировать 
их в свои собственные проекты, в конце концов, вы научитесь, практикуясь и применяя то, что вы узнали в своих 
собственных сценариях. Обязательно вызовите tryhackme attackbox или используйте свой собственный терминал.  

Я нашел этот сайт очень полезным, когда изучал bash. Можете смело использовать его для помощи в прохождении этой 
темы и для дальнейшего обучения после того, как закончите!  https://devhints.io/bash  

### Ответить на вопросы ниже
Ты готов идти!
```commandline
Ответ не нужен
```

## Задание 2
Итак, теперь, когда мы кратко познакомились с тем, что такое bash и для чего он используется, давайте перейдем к примерам!

Для начала давайте определим нашу структуру.

Скрипт bash всегда начинается со следующей строки кода в верхней части скрипта.

 
Это нужно для того, чтобы ваша оболочка (независимо от ее типа) знала, что ей нужно запустить ваш файл с помощью 
bash в терминале. 


Давайте рассмотрим несколько простых примеров.


Это вернет строку «Hello World». Команда « echo» используется для вывода текста на экран, так же как « print» в 
python. Предлагаю вам протестировать это в вашем терминале, чтобы разобраться с bash! 

Вы также можете выполнять обычные команды Linux внутри вашего скрипта bash, и он будет выполнен, если отформатирован 
правильно. Например, мы можем запустить команду « ls» внутри нашего скрипта bash и увидим вывод, когда запустим файл.
Так что давайте заставим его делать это!  

 
С этого момента я буду предполагать, что у вас есть базовые знания Linux и его команд. Если у вас их нет, 
обязательно ознакомьтесь с основами Linux 1, а затем вернитесь и попробуйте снова. https://tryhackme.com/r/room/linuxfundamentalspart1 

Я также не буду включать его #!/bin/bashв начало своих фрагментов кода, иначе он займет много места, поэтому помните,
что он всегда должен быть в начале ваших файлов! 

Теперь, чтобы запустить наш bash-скрипт, мы должны сначала предоставить ему права на исполнение.

Chmod +x yourfile.sh

И затем мы запускаем его с помощью./

                                                                        
Пожалуйста, запустите это сами и посмотрите, что получится.

Мы видим, что он вывел результаты команд « whoami» и « id».


### Ответить на вопросы ниже
Какой фрагмент кода мы можем вставить в начало строки, чтобы закомментировать наш код?
```commandline
#
```

Что выведет на экран следующий скрипт? echo «BishBashBosh»
```commandline
BishBashBosh
```

## Задание 3
Теперь перейдем к переменным,
В bash это довольно просто, и мы создаем их следующим образом:

                                                                         
Где мы даем значение Jammy и присваиваем его переменной name.

Обратите внимание, что для работы переменных нельзя оставлять пробел между именем переменной, « = » и значением. Они 
не могут содержать пробелы. 

Так как же нам теперь использовать нашу переменную? Ну, это тоже очень просто.



Чтобы использовать нашу переменную, нам нужно добавить перед ее именем суффикс on.$
Если мы проверим это в нашем собственном терминале, то получим что-то вроде этого:
```commandline
$ name="Jammy"

$ echo $name

Jammy
```


Это выведет на экран « Джемми ».



Переменные значительно упрощают хранение данных, и вместо того, чтобы вводить одно и то же в нескольких местах, мы 
могли бы просто вставить нашу переменную с $var, а затем объявить ее с определенным значением, что упрощает возврат, 
если вы сделаете что-то неправильно и вам нужно будет это изменить.  Так как же нам отладить наш код?  



Отладка — очень важная часть программирования, поэтому мы должны привыкнуть к решению проблем и исправлению ошибок 
как можно раньше. И в bash есть несколько встроенных функций, которые упрощают нашу жизнь. 

При запуске в командной строке вы можете сделать:



bash -x ./file.sh

Вы можете сделать простой скрипт bash (теперь вы знаете базовый синтаксис) и сделать что-то совершенно неправильное. 
Затем пройдитесь по своей программе в режиме отладки и посмотрите, как она выглядит, когда выдает ошибки! 



Это говорит вам, какие строки работают, а какие нет.  Если вы хотите отладить в определенной точке, вы можете 
вставить set -xв свой скрипт и set +x закончить раздел следующим образом:

Давайте рассмотрим пример. Это наш скрипт, который мы запускали ранее с помощью `bash -x ./example.sh`

                                                                          
Вы можете увидеть, что он выводит + для команды, а затем вывод того, что эта команда выполнила. Если была ошибка, он 
вывел бы - в этой строке, что позволяет легко определить, где вы ошиблись, чтобы вы могли их исправить. 



Мы также можем использовать несколько переменных в чем-то вроде оператора echo. Вы не ограничены только использованием 1!

                                                                          
Ответьте на следующие вопросы и используйте этот фрагмент кода в качестве руководства.
              
### Ответить на вопросы ниже
Что вернет этот код?

```commandline
Jammy is 21 years old
```
Как бы вы вывели город на экран?

```commandline
echo $city
```
Как бы вы вывели страну на экран?


```commandline
echo $country
```

## Задание 4
Теперь мы рассмотрим одну из основных возможностей bash — использование параметров.



Сначала мы рассмотрим параметры, указанные с помощью командной строки при запуске файла. Они бывают разных форм, но 
часто имеют префикс "$", поскольку параметр все еще является переменной. 

Начнем с объявления параметра, который будет нашим первым аргументом при запуске нашего bash-скрипта.

       
Теперь мы запускаем наш скрипт с помощью./example.sh Alex

И конечно же, мы получаем ответ «Алекс».



А что, если нам нужен 2-й аргумент?  Ну, процесс очень прост, и мы просто добавляем $2вместоname=$1



Затем бегите с./example.sh Alex Tony

Как вы думаете, что он вернет?



И он вернул бы «Тони».



Однако что, если мы не хотим предоставлять их таким образом, а вместо этого позволим нам вводить наше имя более 
интерактивным способом? Мы можем сделать это с помощью read. 


Этот код зависнет после выполнения, что даст вам возможность ввести свое имя.

И мы видим, что это сработало!



Может быть, попробуйте сделать небольшой биографический конструктор, где вы берете имя, возраст и работу в качестве 
параметров. Сохраните их в переменной, а затем выведите на экран в предложении.  

Однако с параметрами можно сделать гораздо больше, и я советую вам поэкспериментировать с ними, в конце концов, 
практика — это то, что делает вас лучше!  





### Ответить на вопросы ниже
Как узнать количество аргументов, переданных скрипту?

```commandline
$#
```
Как мы можем получить имя файла нашего текущего скрипта (он же наш первый аргумент)?
```commandline
$0
```
Как нам передать скрипту 4-й аргумент?
```commandline
$4
```
Если скрипт запрашивает у нас ввод данных, как мы можем направить наши вводные данные в переменную с именем «test» с 
помощью «read»? 
```commandline
read test
```
Какой будет вывод «echo $1 $3», если скрипт был запущен с помощью «./script.sh hello hola aloha»
```commandline
hello aloha
```

## Задание 5
Для облегчения понимания этого модуля я предлагаю вам использовать Attackbox или стандартный терминал Linux.

Массивы используются для хранения нескольких фрагментов данных в одной переменной, которые затем могут быть 
извлечены с помощью индекса. Чаще всего обозначается как  var[index_position]. 

Массивы используют индексацию, то есть каждый элемент массива обозначает число.

В массиве  ['car', 'train', 'bike', 'bus'] каждый элемент имеет соответствующий индекс.

Все индексы начинаются с позиции 0

элемент	индекс
машина	0
тренироваться	1
велосипед	2
автобус	3


Теперь, когда мы это рассмотрели, давайте создадим массив в bash.

Синтаксис следующий.



У нас есть имя переменной, в нашем случае «транспорт»

Затем мы заключаем каждый элемент в скобки, оставляя пробел между ними.

`transport=('car' 'train' 'bike' 'bus')`

Затем мы можем вывести все элементы нашего массива следующим образом:

`echo "${transport[@]}"`

Вы можете попробовать это в своем терминале и посмотреть, что получится.

Где «@» означает все аргументы, а [] вокруг него указывает его индекс.

А что, если мы захотим распечатать этот элемент  train?

Мы бы просто набрали:

`echo "${transport[1]}"`

поскольку поезд находится в индексной позиции 1.



Последнее, что мы рассмотрим, это если мы хотим изменить элемент или удалить его.  Если мы хотим удалить элемент, мы используем  unset утилиту.

`unset transport[1]`

Теперь это удаляет  train элемент, если бы мы хотели, мы могли бы вывести его обратно и увидеть, что он действительно исчез,

Теперь давайте установим его на что-то другое. Мы можем сделать:

`transport[1]='trainride'`

Если мы выведем массив, то получим:

car trainride bike bus



Итак, нам успешно удалось поменять элемент в нашем массиве!



В качестве небольшого побочного проекта попробуйте построить ваш предыдущий проект биографического конструктора, 
включите массивы, чтобы вы могли хранить несколько имен и несколько фактов о человеке. Затем в следующем модуле мы сможем расшириться еще больше. 

Учитывая массив, пожалуйста, ответьте на следующие вопросы

cars=('honda' 'audi' 'bmw' 'tesla')

### Ответить на вопросы ниже
Какая команда выведет audi на экран с помощью индексации?
```commandline
echo "${cars[1]}"
```
Если бы мы захотели удалить Теслу из массива, как бы мы это сделали?
```commandline
unset cars[3]
```

Как мы можем вставить новое значение под названием toyota вместо tesla?
```commandline
cars[3]='toyota'
```
## Задание 6
Когда мы говорим об условных операторах, это означает, что определенный фрагмент кода зависит от выполнения условия. 
Это часто определяется с помощью операторов отношения, таких как «равно», «больше» и «меньше». 



Мы сделаем простое выражение "if", чтобы проверить, равна ли переменная значению, мы также сделаем скрипт, который 
проверяет, существует ли файл и доступен ли он для записи, если да, мы запишем сообщение в этот файл, если нет, он 
будет удален и создан новый. Здесь будет рассказано много нового, так что будьте внимательны.  



Сначала мы обсудим базовый синтаксис оператора if.

Все операторы if выглядят так:



Давайте рассмотрим пример:

Операторы if всегда используют пару скобок, а в случае [] нам нужно оставить пробел с обеих сторон текста (синтаксис 
bash). Нам также всегда нужно заканчивать оператор if с помощью fi



Здесь переменная объявляется как 10, а в верхней строке оператора if переменная $count сравнивается с целым числом 10.

Если они равны, то выводится true , если false, то выводится false . Как мы знаем, 10 равно 10, поэтому выводится true.

-eq — один из способов сделать это, вы также можете использовать « = »



^^^^^ Вот несколько примеров.



Давайте теперь используем это, чтобы создать небольшой скрипт, который сравнивает ввод (параметр) и проверяет его со 
значением, чтобы проверить, является ли оно истинным или нет. Игра в угадайку, если хотите. 

Теперь давайте проверим это в нашем терминале.
```commandline
# ./example.sh guessme

"They are equal"

# ./example.sh hi

"They are not equal"
```


И мы видим, что это работает!

Можете свободно экспериментировать с ними и пробовать создавать различные комбинации и использовать различные операторы.



Теперь давайте создадим еще один сценарий, в котором мы будем использовать 2 условия одновременно и вернемся к 
концепции, которую мы изучили на первом уроке. 

Давай начнем.

Мы хотим создать скрипт, который будет выполняться над файлом, заданным параметром .

Затем мы проверяем, существует ли он и имеет ли он права на запись . Если у него есть права на запись, то мы 
отправляем ему echo « hello ». Если он либо недоступен, либо не существует, мы создадим файл и отправляем ему echo 
«hello». Начнем!  
```commandline
─ # ./example.sh hello.txt                                                                                            
─ # cat hello.txt 

```

привет

И мы видим, что это сработало!!

Параметр -f проверяет существование файла.

Параметр -w проверяет, доступен ли файл для записи; без прав на запись мы не сможем вывести наш текст в файл.



Чтобы закончить наш небольшой проект из предыдущего задания. Вы можете дополнить свой сценарий, используя оператор 
if/else. Проверьте, не моложе ли возраст 18 лет, если да, то повторите его имя с фразой «Вы не имеете права на 
работу» или что-то в этом роде, если им больше 18 лет, то спросите их о работе, вы можете сделать это с помощью read 

Не стесняйтесь добавлять все, что вам нравится, и усложнять проект настолько, насколько вы пожелаете. Удачи вам в вашем проекте!

### Ответить на вопросы ниже
Какой флаг нужно проверить, есть ли у нас доступ на чтение к файлу?


```commandline
-r
```
Какой флаг нужно проверить, чтобы определить, является ли это каталогом?

```commandline
-d
```

## Задание 7
Привет и большое спасибо за завершение этой комнаты по скриптингу bash! Хочу поздравить вас с тем, что вы выдержали 
все трудности и завершили комнату. 

Если вы хотите еще больше расширить свои познания в области bash или программирования в целом, я настоятельно 
рекомендую следующие сайты: 

https://www.codewars.com/
https://www.hackerrank.com/
И, конечно же, Google!
Спасибо еще раз. Если вы хотите спросить меня о чем-то или у вас есть вопросы по поводу комнаты, вы можете связаться 
со мной в Twitter https://twitter.com/fieldraccoon

Удачи в вашем путешествии!

### Ответить на вопросы ниже
Отличная работа!

```commandline
Ответ не нужен
```

[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md) 