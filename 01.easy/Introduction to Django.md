[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)

# Комната [Introduction to Django](https://tryhackme.com/r/room/django) 

Всего 5 заданий:
## Задание 1
Изучение Python может быть чрезвычайно полезным для тестировщиков на проникновение, а простое понимание его 
фреймворков может стать ключом к успеху. В этом уроке мы узнаем об одном из лучших из когда-либо созданных: Django.  

Django — это высокоуровневый веб-фреймворк Python, который позволяет быстро разрабатывать безопасные и 
поддерживаемые веб-сайты. Он позволяет разрабатывать веб-сайты и веб-приложения за считанные часы. 

Django может автоматически компилировать HTML-код, что позволяет любому человеку без каких-либо продвинутых знаний в 
языках разметки разрабатывать веб-сайт. Кроме того, Django, возможно, является одним из самых безопасных фреймворков 
для разработки, который при правильной настройке может сильно противостоять SQL-инъекциям и XSS .  

В общем, если вы знакомы с Python и рассматриваете возможность создания веб-сайта, Django может быть действительно 
хорошим выбором. Что касается тестировщика на проникновение, важно понимать базовую структуру веб-сайтов на основе 
Django, чтобы иметь возможность выявлять возможные слабые места и ошибки, которые может допустить разработчик.  

### Ответьте на вопросы ниже
Прочитайте выше
```commandline
Ответ не нужен
```

## Задание 2
Внимание! Если у вас нет абсолютно никакого опыта работы с Python, рекомендую пройти эту комнату по основам Python: 
" Введение в Python " 

Для этой комнаты мы будем использовать Python 3. (Здесь подойдет любая версия 3.xx) с Django 2.2.

Установите Django, выполнив эту команду:
```commandline
pip3 install Django==2.2.12
```
Теперь мы готовы создать и правильно настроить наш первый веб-сайт.

Создайте каталог для файлов вашего проекта и перейдите туда с помощью командной строки.

запустить `django-admin startproject {project_name}`, чтобы начать свой проект. (Замените {project_name} на 
предпочитаемое вами имя). 

Запустите `python3 manage.py migrate` для автоматической настройки новых файлов.

После создания проекта вы увидите, что Django создает файл manage.pyи каталог файлов, названный в честь вашего проекта.

`manage.py` — это утилита командной строки, которая позволяет вам взаимодействовать с вашим проектом Django различными 
способами.  Она особенно удобна при создании веб-приложений, управлении базами данных и, что самое важное, при 
запуске сервера. 

Базовый синтаксис для использования этой утилиты:`python3 manage.py {command}`
> запустить сервер

Runserver — самая важная команда, используемая с manage.py; она позволяет вам развернуть ваш веб-сайт на сервере. 
Django имеет замечательную функцию, которая позволяет вам мгновенно видеть изменения, внесенные на веб-сайт, без его 
перезапуска. (Необходимо только перезапустить команду runserver при добавлении нового приложения).

Запустите эту команду и перейдите на свой веб-сайт с IP, указанным в схеме. Вы должны увидеть страницу, подобную этой:

Примечание: если вы хотите запустить сервер в своей локальной сети, просто добавьте 0.0.0.0:8000 после команды 
runserver. (В случае, если после этого вы получите ошибку, просто перейдите в settings.py, расположенный в папке 
вашего веб-сайта, и добавьте этот адрес в ALLOWED_HOSTS)  

> создает суперпользователя

Эта команда позволяет создать учетную запись администратора для веб-панели администратора Django. 

Запустите эту команду и получите доступ к панели по адресу IP:8000/admin.

> стартап

Startapp позволяет вам инициализировать приложение для вашего проекта. Проекты Django могут иметь бесконечное 
количество приложений. Основной синтаксис: 

`python3 manage.py startapp {app_name}`

### Ответьте на вопросы ниже
Как бы мы создали приложение под названием «Формы»? 
```commandline
python3 manage.py startapp Forms
```
Как бы мы запустили наш проект в локальной сети?
```commandline
python3 manage.py runserver 0.0.0.0:8000
```

## Задание 3
Теперь давайте продолжим и создадим очень простое приложение: 

1. Создайте приложение, используя команду из Unit 2, и назовите его как хотите. Я буду использовать «Статьи» для 
   этого урока. 
2. Перейдите в settings.py и включите название вашего приложения в *INSTALLED_APPS*:
3. Перейдите в urls.py (находится в основной папке!) и укажите там путь к вашему приложению:
Обратите внимание, что {app_name} следует заменить на название вашего приложения.
4. Перенесите изменения, запустивpython3 manage.py migrate

Ваше приложение теперь находится по адресу https://IP:8000/{app_name} 

После успешного создания приложения перейдем в каталог app и продолжим там.  Как видно, Django автоматически создает 
файлы внутри папки app. Мы рассмотрим их назначение, поскольку продолжим создание нашего веб-сайта. 

А пока создайте файл urls.py , который вам особенно пригодится в ближайшем будущем.

В целом, веб-сайты на базе Django работают следующим образом:
urls.py отвечает за прием и перераспределение входящих HTTP- запросов через views.py.

Базовый синтаксис urls.py можно увидеть на снимке экрана выше. 

Мы создаем переменную с именем , urlpatternsв которой указываем имена наших каталогов. views.indexВызывает функцию 
indexviews.py , которая должна быть выполнена, тем самым создавая некоторый выходной ответ для HTTP- запроса. 

Например , если мы хотим создать каталог с именем «archive» и функцией «main», мы должны включить это в urls.py:

path('archive/', views.main, name ='main')

ПРИМЕЧАНИЕ: Пути с пустым каталогом ('') будут вызывать функцию всякий раз, когда приложение будет доступно по 
адресу https://IP/{app_name}; любые другие каталоги будут расширять ссылку , например, каталог архивов, который я 
использовал выше, будет расположен в https://IP/articles/archive.  

views.pyотвечает за выполнение функций, которые вызываются с помощью urls.py

Теперь давайте создадим простую функцию HTTP- ответа для нашего приложения.

Синтаксис для этого довольно прост. Все, что вам нужно сделать, это создать функцию с определенным именем, на 
которую вы будете ссылаться в urls.py  

Вот пример функции, которая возвращает сообщение «Привет, мир!»:



Обратите внимание, что в этом случае функция называется index, поэтому для того, чтобы она заработала, вам нужно 
вставить эту строку в ваш urls.py 

path('', views.index, name='index'),



Теперь перейдите по адресу http://IP:8000/{app_name} и посмотрите, появилось ли сообщение «Hello, world!».

К этому моменту мы смогли создать действительно простой пример веб-сайта, который возвращает текстовое сообщение. Мы 
также можем создавать различные приложения и расширять их каталогами и прошли через веб-часть сервера Django.  

Очевидно, что простого HTTP-ответа недостаточно для правильного отображения контента. Django может автоматически 
генерировать HTML-разметку, если правильно об этом сказать. Шаблоны — это те, кто нам в этом помогает.  

Без лишних слов давайте создадим папку с именем templates в папке вашего приложения и поместим в нее файл с именем 
base.htmlBase.html будет играть роль просто настроенного примера HTML, который в конечном итоге позволит нам 
исключить работу с HTML.   

Содержимое base.html довольно простое и большую часть времени остается неизменным:



Теперь создайте еще один пустой HTML-файл (index.html) и включите в него этот код:



Как видно здесь, он использует base.html в качестве своей основы и позволяет нам вводить любой простой или слегка 
HTML-размеченный текст между {% extends 'base.html'%} and {% endblock %}. Попробуйте изменить Hello World на 
какой-нибудь другой текст, и теперь мы готовы заставить это работать!  

Помните, какой файл отвечает за хранение функций? views.py! 

Перейдите туда и измените функцию index  на этот код, который автоматически отобразит ваш шаблон из index.html.



Теперь проверьте свой текст по адресу  http://IP:8000/{app_name}

Вы можете создать разные шаблоны для разных функций и использовать их отдельно. Например, если вы создаете блог-сайт,
вы можете захотеть создать шаблоны для статей и домашней страницы отдельно. 

> Если вам было сложно следовать руководству или у вас возникли ошибки, перейдите к разделу 4 и найдите там ссылку 
> на github. Я загружу точный пример того, о чем я говорил, чтобы вы могли сравнить его со своим кодом и легко 
> устранить неполадки.  

#### Ответьте на вопросы ниже
Прочитайте выше
```commandline
Ответ не нужен
```

## Задание 4
> Если вам было сложно следовать руководству или у вас возникли какие-либо ошибки, вот точный пример сайта Django, о 
> котором я говорил: 

https://github.com/Swafox/Django-example

(Если у вас остались вопросы, обращайтесь ко мне в Discord. Буду рад помочь.)

> Также возможно бесплатно развернуть ваш пример Django! https://www.pythonanywhere.com/ Имеет полную поддержку 
> приложений Django с интуитивно понятным графическим интерфейсом . 
> Если вам понравился Django и вы хотите пойти дальше, я бы порекомендовал следующие бесплатные источники:

https://tutorial.djangogirls.org/en/
https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django
https://docs.djangoproject.com/en/2.2/
https://djangobook.com/mastering-django-2-book/
### Ответьте на вопросы ниже
Флаг со страницы GitHub
```commandline
THM{g1t_djang0_hUb}
```

## Задание 5
Теперь пришло время для небольшого CTF!

It might take around ~3 minutes for the machine to boot properly.

Исправьте ошибку и восстановите все флаги! (Используйте знания из предыдущих модулей)

Имя пользователя: django-admin
Пароль: roottoor1212
### Ответьте на вопросы ниже
Флаг панели администратора?
```commandline
THM{DjanGO_Adm1n}
```
Пользовательский флаг?
```commandline
THM{SSH_gUy_101}
```
Скрытый флаг?
```commandline
THM{django_w1zzard}
```

[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)