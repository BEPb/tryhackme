[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)

# Комната [Networking Concepts](https://tryhackme.com/r/room/networkingconcepts) 

Всего 5 заданий:
## Задание 1
Вы когда-нибудь задумывались, зачем вам нужен IP-адрес для доступа в Интернет? Правда ли, что IP-адрес может однозначно идентифицировать пользователя? Вам интересно узнать, как выглядит жизнь пакета? Если ответ «да», давайте погрузимся в тему!

Этот зал является первым в серии из четырех залов, посвященных ознакомлению пользователя с важнейшими сетевыми концепциями и наиболее распространенными сетевыми протоколами:

Концепции сетевых взаимодействий (эта комната)
Основы сетевых технологий
Основные сетевые протоколы
Сетевые протоколы безопасности
Предварительные условия для комнаты
В этой комнате предполагается, что вы знаете такие термины, как IP-адрес и номер порта TCP; однако мы не ожидаем, что читатель сможет объяснить эти термины с надлежащей технической глубиной. Если вы не знакомы с этими терминами, пожалуйста, рассмотрите возможность присоединиться к пути Pre Security .

Цели обучения
К тому времени, как вы закончите эту комнату, вы узнаете следующее:

Сетевая модель ISO OSI
IP-адреса, подсети и маршрутизация
TCP, UDP и номера портов
Как подключиться к открытому TCP -порту из командной строки
### Ответьте на вопросы ниже
Приготовьте свой блокнот и начнем.
```commandline
Ответ не нужен
```

## Задание 2
Прежде чем начать, следует отметить, что модель OSI может показаться сложной на первый взгляд. Не волнуйтесь, если вы столкнетесь с непонятными аббревиатурами, поскольку мы приводим примеры уровней модели OSI. Мы заверяем вас, что к тому времени, как вы закончите этот модуль, эта задача покажется вам проще простого.

**Модель OSI (Open Systems Interconnection)** — это концептуальная модель, разработанная Международной организацией 
по стандартизации (ISO), которая описывает, как должны происходить коммуникации в компьютерной сети. Другими словами,
модель OSI определяет структуру для коммуникаций в компьютерной сети. Хотя эта модель является теоретической, ее 
изучение и понимание жизненно важно, поскольку она помогает понять сетевые концепции на более глубоком уровне. 
Модель OSI состоит из семи уровней:

- Физический уровень
- Уровень канала передачи данных
- Сетевой уровень
- Транспортный уровень
- Уровень сеанса
- Уровень представления
- Уровень приложений

Нумерация начинается с физического уровня, который является уровнем 1, в то время как верхний уровень, прикладной 
уровень, является уровнем 7. Чтобы помочь вам запомнить уровни снизу вверх, вы можете использовать мнемонику, 
например, «Пожалуйста, не выбрасывайте пиццу со шпинатом». Вы можете поискать в Интернете другие легко 
запоминающиеся аббревиатуры, если это поможет вам их запомнить. Важно помнить уровни модели OSI с их номерами; в 
противном случае вам будет трудно понять такие термины, как «коммутатор уровня 3» или «брандмауэр уровня 7».

### Семь уровней модели OSI ISO.

#### Уровень 1: Физический уровень
Физический уровень, также называемый уровнем 1, имеет дело с физическим соединением между устройствами; это включает 
среду, такую как провод, и определение двоичных цифр 0 и 1. Передача данных может осуществляться через 
электрический, оптический или беспроводной сигнал. Следовательно, нам нужны кабели передачи данных или антенны, в 
зависимости от нашей физической среды.

Помимо кабеля Ethernet, показанного на рисунке ниже, и оптоволоконного кабеля, примерами среды физического уровня 
являются радиодиапазоны WiFi, диапазон 2,4 ГГц, диапазон 5 ГГц и диапазон 6 ГГц.

Ethernet-кабель

#### Уровень 2: Уровень канала передачи данных
Физический уровень определяет среду для передачи нашего сигнала. Уровень канала передачи данных, т. е. уровень 2, 
представляет собой протокол, который позволяет передавать данные между узлами в одном сегменте сети. Давайте скажем 
проще. Уровень канала передачи данных описывает соглашение между различными системами в одном сегменте сети о том, 
как общаться. Сегмент сети относится к группе сетевых устройств, использующих общую среду или канал для передачи 
информации. Например, рассмотрим офис компании с десятью компьютерами, подключенными к сетевому коммутатору; это 
сегмент сети.

Примерами уровня 2 являются Ethernet, т. е. 802.3, и WiFi, т. е. 802.11. Адреса Ethernet и WiFi состоят из шести 
байтов. Их адрес называется MAC-адресом, где MAC означает Media Access Control (управление доступом к среде). Обычно 
они выражаются в шестнадцатеричном формате с двоеточием, разделяющим каждые два байта. Три крайних левых байта 
идентифицируют поставщика.

MAC-адрес состоит из шести октетов или байтов, где три крайних левых байта идентифицируют поставщика, изготовившего 
сетевой интерфейс. 

Мы ожидаем увидеть два MAC-адреса в каждом кадре в реальной сетевой коммуникации через Ethernet или WiFi. Пакет на 
снимке экрана ниже показывает: 

- Адрес канала передачи данных (MAC-адрес) выделен желтым цветом.
- Адрес исходного канала передачи данных (MAC-адрес) выделен синим цветом.
- Остальные биты показывают отправляемые данные.
- Интерфейс Wireshark, отображающий пакет с выделенными MAC-адресами источника и назначения.

#### Уровень 3: Сетевой уровень
Канальный уровень фокусируется на отправке данных между двумя узлами в одном сегменте сети. Сетевой уровень, т. е. 
уровень 3, занимается отправкой данных между различными сетями. В более технических терминах сетевой уровень 
занимается логической адресацией и маршрутизацией, т. е. поиском пути для передачи сетевых пакетов между различными 
сетями.

На уровне канала передачи данных мы привели пример офиса компании с десятью компьютерами, где уровень канала 
передачи данных отвечает за обеспечение связи между ними. Предположим, что у этой компании есть несколько офисов, 
распределенных по разным городам, странам или даже континентам. Сетевой уровень отвечает за соединение различных 
офисов вместе.

На представленной ниже сети показано, что компьютеры A и B соединены, хотя и находятся в разных сетях. Вы также 
можете заметить два пути, соединяющих два компьютера; сетевой уровень направит сетевые пакеты по тому пути, который 
посчитает лучшим.  

Схема компьютерной сети с двумя настольными компьютерами и четырьмя маршрутизаторами между ними. Существует 
несколько путей, которые может использовать пакет. 

Примерами сетевого уровня являются протоколы Интернета (IP), протокола управляющих сообщений Интернета (ICMP) и 
протоколы виртуальной частной сети ( VPN ), такие как IPSec и SSL/TLS VPN . 

#### Уровень 4: Транспортный уровень
Уровень 4, транспортный уровень, обеспечивает сквозную связь между запущенными приложениями на разных хостах. Ваш 
веб-браузер подключен к веб-серверу TryHackMe через транспортный уровень, который может поддерживать различные 
функции, такие как управление потоком, сегментация и исправление ошибок.

Примерами уровня 4 являются протокол управления передачей (TCP) и протокол пользовательских датаграмм ( UDP ).

#### Уровень 5: сеансовый уровень
Уровень сеанса отвечает за установление, поддержание и синхронизацию связи между приложениями, работающими на разных 
хостах. Установление сеанса означает инициирование связи между приложениями и согласование необходимых параметров 
для сеанса. Синхронизация данных гарантирует, что данные передаются в правильном порядке, и предоставляет механизмы 
восстановления в случае сбоев передачи.

Примерами сеансового уровня являются сетевая файловая система (NFS) и удаленный вызов процедур (RPC).

#### Уровень 6: Уровень представления
Уровень представления обеспечивает доставку данных в форме, понятной прикладному уровню. Уровень 6 обрабатывает 
кодирование, сжатие и шифрование данных. Примером кодирования является кодировка символов, например ASCII или Unicode. 

На уровне представления используются различные стандарты. Рассмотрим сценарий, в котором мы хотим отправить 
изображение по электронной почте. Во-первых, мы используем JPEG, GIF и PNG для сохранения наших изображений; кроме 
того, хотя это скрыто от пользователя почтовым клиентом, мы используем MIME (Multipurpose Internet Mail Extensions) 
для прикрепления файла к нашему электронному письму. MIME кодирует двоичный файл с использованием 7-битных символов 
ASCII.

#### Уровень 7: Уровень приложений
Уровень приложений предоставляет сетевые сервисы непосредственно приложениям конечного пользователя. Ваш веб-браузер 
будет использовать протокол HTTP для запроса файла, отправки формы или загрузки файла.

Уровень приложений — это верхний уровень, и вы могли столкнуться со многими из его протоколов, поскольку используете 
различные приложения. Примерами протоколов уровня 7 являются HTTP , FTP , DNS, POP3, SMTP и IMAP . Не волнуйтесь, 
если вы не знакомы со всеми из них.

Краткое содержание
Первое чтение о модели ISO OSI может быть пугающим; однако, это становится легче по мере того, как вы продвигаетесь 
в изучении сетевых протоколов. Чтобы помочь вам в изучении, мы обобщили уровни ISO OSI в таблице ниже. 

- Номер слоя	Имя слоя	Основная функция	Примеры протоколов и стандартов
- Слой 7	Уровень приложений	Предоставление услуг и интерфейсов для приложений	HTTP , FTP , DNS, POP3, SMTP , IMAP
- Слой 6	Уровень представления	Кодирование, шифрование и сжатие данных	Юникод, MIME , JPEG, PNG, MPEG
- Слой 5	Уровень сеанса	Создание, поддержание и синхронизация сеансов	НФС, РПК
- Слой 4	Транспортный уровень	Сквозная коммуникация и сегментация данных	UDP-протокол , TCP-протокол
- Слой 3	Сетевой уровень	Логическая адресация и маршрутизация между сетями	IP, ICMP, IPSec
- Слой 2	Уровень канала передачи данных	Надежная передача данных между соседними узлами	Ethernet (802.3), Wi-Fi 
  (802.11)
- Слой 1	Физический уровень	Физические носители данных	Электрические, оптические и беспроводные сигналы
### Ответьте на вопросы ниже
Какой уровень отвечает за соединение одного приложения с другим?
```commandline
Layer 4
```
Какой уровень отвечает за маршрутизацию пакетов в нужную сеть?
```commandline
Layer 3
```
Какой уровень в модели OSI отвечает за кодирование данных приложения?
```commandline
Layer 6
```
Какой уровень отвечает за передачу данных между хостами в одном сегменте сети?
```commandline
Layer 2
```

## Задание 3
Теперь, когда мы рассмотрели концептуальную модель ISO OSI, пришло время изучить реализованную модель — модель TCP 
/IP. TCP /IP означает Transmission Control Protocol/Internet Protocol и был разработан в 1970-х годах Министерством 
обороны (DoD). Я слышу, как вы спрашиваете, зачем DoD создало такую модель. Одной из сильных сторон этой модели 
является то, что она позволяет сети продолжать функционировать, когда ее части выходят из строя, например, из-за 
военной атаки. Эта возможность отчасти обусловлена конструкцией протоколов маршрутизации, которые адаптируются к 
изменениям топологии сети.

В нашей презентации модели ISO OSI мы пошли снизу вверх, от уровня 1 к уровню 7. В этой задаче давайте посмотрим на 
вещи с другой точки зрения, сверху вниз. Сверху вниз у нас есть: 

- Уровень приложений : уровни приложений, представлений и сеансов модели OSI, т. е. уровни 5, 6 и 7, сгруппированы в 
уровень приложений в модели TCP /IP.
- Транспортный уровень : это уровень 4.
- Уровень Интернета : это уровень 3. Сетевой уровень модели OSI называется уровнем Интернета в модели TCP /IP.
- Слой связи : это слой 2.
В таблице ниже показано, как уровни модели TCP /IP соотносятся с уровнями модели ISO/OSI.

- Номер слоя	Модель ISO OSI	Модель TCP /IP ( RFC 1122)	Протоколы
- 7	Уровень приложений	Уровень приложений	HTTP , HTTPS, FTP , POP3, SMTP , IMAP, Telnet, SSH ,
- 6	Уровень представления
- 5	Уровень сеанса
- 4	Транспортный уровень	Транспортный уровень	TCP, UDP
- 3	Сетевой уровень	Интернет-слой	IP, ICMP, IPSec
- 2	Уровень канала передачи данных	Ссылочный слой	Ethernet 802.3, Wi-Fi 802.11
- 1	Физический уровень		

Во многих современных учебниках по сетям модель TCP/IP представлена в виде пяти слоев вместо четырех. Например, в 
Computer Networking: A Top-Down Approach 8th Edition Куросе и Росс описывают следующий пятислойный стек 
интернет-протоколов, включая физический уровень:

- Приложение
- Транспорт
- Сеть
- Связь
- Физический
В следующих заданиях мы рассмотрим протокол IP на уровне Интернета, а также протоколы UDP и TCP на транспортном уровне.

### Ответьте на вопросы ниже
К какому уровню относится HTTP в модели TCP/IP?
```commandline
Application Layer
```
Сколько уровней модели OSI охватывает прикладной уровень в модели TCP/IP?
```commandline
3
```

## Задание 4
Когда вы слышите слово IP-адрес, вы можете подумать об адресе типа 192.168.0.1или о чем-то менее распространенном, например 172.16.159.243. В обоих случаях вы правы. Оба они являются IP-адресами; если быть точным, то это адреса IPv4 (IP версии 4).

Каждому хосту в сети нужен уникальный идентификатор, чтобы другие хосты могли с ним общаться. Без уникального идентификатора хост не может быть найден без двусмысленности. При использовании набора протоколов TCP /IP нам необходимо назначить IP-адрес каждому устройству, подключенному к сети.

Аналогом IP-адреса является ваш домашний почтовый адрес. Ваш почтовый адрес позволяет вам получать письма и посылки со всего мира. Более того, он может однозначно идентифицировать ваш дом; в противном случае вы не сможете совершать покупки в Интернете!

Как вы, возможно, уже знаете, у нас есть IPv4 и IPv6 (IP версии 6). IPv4 по-прежнему наиболее распространен, и всякий раз, когда вы сталкиваетесь с текстом, в котором упоминается IP без версии, мы ожидаем, что они подразумевают IPv4.

Итак, что же делает IP-адрес? IP-адрес состоит из четырех октетов, т. е. 32 бит. Будучи 8-битным, октет позволяет нам представлять десятичное число от 0 до 255. IP-адрес показан на изображении ниже.

IP-адрес состоит из 4 октетов или байтов, и каждый октет представляет собой десятичное число от 0 до 255.

Рискуя слишком упростить ситуацию, 0 и 255 зарезервированы для сетевых и широковещательных адресов соответственно. Другими словами, 192.168.1.0— это сетевой адрес, а 192.168.1.255— широковещательный адрес. Отправка на широковещательный адрес нацелена на все хосты в сети. С помощью простой математики можно сделать вывод, что у нас не может быть более 4 миллиардов уникальных адресов IPv4. Если вам интересна математика, это примерно 2 32 , потому что у нас 32 бита. Это число приблизительное, потому что мы не учитывали сетевые и широковещательные адреса.

Просмотр конфигурации вашей сети
Вы можете узнать свой IP-адрес в командной строке MS Windows с помощью команды ipconfig. В системах Linux и UNIX вы можете ввести команду ifconfigили ip address show, которую можно ввести как ip a s. В окне терминала ниже мы показываем ifconfig.

Терминал
```commandline
user@TryHackMe$ ifconfig
[...]
wlo1: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.66.89  netmask 255.255.255.0  broadcast 192.168.66.255
        inet6 fe80::73e1:ca5e:3f93:b1b3  prefixlen 64  scopeid 0x20<link>
        ether cc:5e:f8:02:21:a7  txqueuelen 1000  (Ethernet)
        RX packets 19684680  bytes 18865072842 (17.5 GiB)
        RX errors 0  dropped 364  overruns 0  frame 0
        TX packets 14439678  bytes 8773200951 (8.1 GiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
```

Вывод терминала выше показывает следующее:

IP-адрес хоста (ноутбука)192.168.66.89
Маска подсети:255.255.255.0
Широковещательный адрес:192.168.66.255
Давайте ip a sсравним, как представлен IP-адрес сетевой карты.

Терминал
```commandline
user@TryHackMe$ ip a s
[...]
4: wlo1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether cc:5e:f8:02:21:a7 brd ff:ff:ff:ff:ff:ff
    altname wlp3s0
    inet 192.168.66.89/24 brd 192.168.66.255 scope global dynamic noprefixroute wlo1
       valid_lft 36795sec preferred_lft 36795sec
    inet6 fe80::73e1:ca5e:3f93:b1b3/64 scope link noprefixroute 
       valid_lft forever preferred_lft forever
```

Вывод терминала выше показывает следующее:

IP-адрес хоста (ноутбука)192.168.66.89/24
Широковещательный адрес:192.168.66.255
Если вам интересно, маска подсети 255.255.255.0также может быть записана как /24. Это /24означает, что самые левые 
24 бита в IP-адресе не меняются по всей сети, т. е. подсети. Другими словами, самые левые три октета одинаковы по 
всей подсети; поэтому мы можем ожидать найти адреса в диапазоне от 192.168.66.1до 192.168.66.254. Подобно тому, что 
было упомянуто ранее, 192.168.66.0и 192.168.66.255являются сетевыми и широковещательными адресами соответственно.

Частные адреса
При объяснении IP-адресов полезно упомянуть, что для большинства практических целей существует два типа IP-адресов:

Публичные IP-адреса
Частные IP-адреса
RFC 1918 определяет следующие три диапазона частных IP-адресов:
```commandline
10.0.0.0- 10.255.255.255( 10/8)
172.16.0.0- 172.31.255.255( 172.16/12)
192.168.0.0- 192.168.255.255( 192.168/16)
```

Ранее мы приводили аналогию, согласно которой публичный IP-адрес подобен вашему домашнему почтовому адресу. Частный 
IP-адрес отличается; изначальная идея заключается в том, что он не может достичь или быть достигнут из внешнего мира.
Он похож на изолированный город или комплекс, где все дома и квартиры пронумерованы систематически и могут легко 
обмениваться почтой друг с другом, но не с внешним миром. Чтобы частный IP-адрес мог получить доступ к Интернету, 
маршрутизатор должен иметь публичный IP-адрес и должен поддерживать преобразование сетевых адресов (NAT). На этом 
этапе давайте не будем беспокоиться о понимании того, как работает NAT, поскольку мы вернемся к этому позже в этом 
модуле.

Прежде чем двигаться дальше, я рекомендую запомнить диапазоны частных IP-адресов. В противном случае вы можете 
увидеть IP-адрес типа 10.1.33.7или 172.31.33.7и попытаться получить к нему доступ с публичного IP-адреса. 

#### Маршрутизация
Маршрутизатор похож на местное почтовое отделение: вы передаете им посылку, и они знают, как ее доставить. Если 
копнуть глубже, вы можете отправить что-то по адресу в другом городе или стране. Почтовое отделение проверит адрес и 
решит, куда отправить это дальше. Например, если это должно покинуть страну, мы ожидаем, что один центральный офис 
будет обрабатывать все отправки за границу.

С технической точки зрения маршрутизатор пересылает пакеты данных в нужную сеть. Обычно пакет данных проходит через 
несколько маршрутизаторов, прежде чем достигнет своего конечного пункта назначения. Маршрутизатор функционирует на 
уровне 3, проверяя IP-адрес и пересылая пакет в лучшую сеть (маршрутизатор), чтобы пакет приблизился к месту 
назначения.

Схема компьютерной сети, показывающая веб-сервер, мобильного пользователя с ноутбуком и офисного пользователя с 
настольным компьютером. Между тремя системами есть шесть маршрутизаторов, и есть разные пути, по которым пакет может 
перемещаться из одной системы в другую.

### Ответьте на вопросы ниже
Какой из следующих IP-адресов не является частным IP-адресом?

192.168.250.125
10.20.141.132
49.69.147.197
172.23.182.251

```commandline
49.69.147.197
```
Какой из следующих IP-адресов не является допустимым IP-адресом?

192.168.250.15
192.168.254.17
192.168.305.19
192.168.199.13

```commandline
192.168.305.19
```

## Задание 5
Протокол IP позволяет нам достичь конечного хоста в сети; хост идентифицируется по его IP-адресу. Нам нужны протоколы, которые позволят процессам на сетевых хостах общаться друг с другом. Для этого есть два транспортных протокола: UDP и TCP .

#### UDP
UDP (протокол пользовательских датаграмм) позволяет нам достичь определенного процесса на этом целевом хосте. UDP — 
это простой протокол без установления соединения, который работает на транспортном уровне, т. е. уровне 4. 
Отсутствие соединения означает, что ему не нужно устанавливать соединение. UDP даже не предоставляет механизма, 
чтобы узнать, что пакет был доставлен.   

IP-адрес идентифицирует хост; нам нужен механизм для определения процесса отправки и получения. Этого можно добиться с помощью номеров портов. Номер порта использует два октета; следовательно, он находится в диапазоне от 1 до 65535; порт 0 зарезервирован. (Число 65535 вычисляется с помощью выражения 2 16  − 1 .)

Реальный пример, похожий на UDP , — это стандартная почтовая служба без подтверждения доставки. Другими словами, нет гарантии, что пакет UDP был успешно получен, как в случае отправки посылки с помощью стандартной почты без подтверждения доставки. В случае стандартной почты это означает более низкую стоимость, чем варианты доставки почты с подтверждением. В случае UDP это означает лучшую скорость, чем транспортный протокол, который предоставляет «подтверждение».

Но что, если нам нужен транспортный протокол, который подтверждает полученные пакеты? Ответ заключается в использовании TCP вместо UDP .

#### TCP
TCP (Transmission Control Protocol) — это транспортный протокол, ориентированный на соединение. Он использует различные механизмы для обеспечения надежной доставки данных, отправляемых различными процессами на сетевых хостах. Как и UDP , это протокол уровня 4. Будучи ориентированным на соединение, он требует установления TCP- соединения перед отправкой любых данных.

В TCP каждый октет данных имеет порядковый номер; это позволяет получателю легко идентифицировать потерянные или дублированные пакеты. Получатель, с другой стороны, подтверждает прием данных с помощью номера подтверждения, указывающего последний полученный октет.

TCP - соединение устанавливается с помощью так называемого трехстороннего рукопожатия. Используются два флага: SYN (синхронизация) и ACK (подтверждение). Пакеты отправляются следующим образом:

Пакет SYN: Клиент инициирует соединение, отправляя серверу пакет SYN. ​​Этот пакет содержит случайно выбранный клиентом начальный порядковый номер.
Пакет SYN-ACK: сервер отвечает на пакет SYN пакетом SYN-ACK, который добавляет начальный порядковый номер, случайно выбранный сервером.
Пакет ACK: Трехстороннее рукопожатие завершается, когда клиент отправляет пакет ACK, подтверждающий получение пакета SYN-ACK.
Трехстороннее рукопожатие TCP требует обмена тремя пакетами.

Подобно UDP , TCP идентифицирует процесс инициирования или ожидания (прослушивания) соединения с использованием номеров портов. Как указано, допустимый номер порта находится в диапазоне от 1 до 65535, поскольку он использует два октета, а порт 0 зарезервирован.

### Ответьте на вопросы ниже
Какой протокол требует трехстороннего рукопожатия?


```commandline
TCP
```
Каково приблизительное количество номеров портов (в тысячах)?


```commandline
65
```

## Задание 6
Прежде чем закончить, важно объяснить еще одну ключевую концепцию: инкапсуляцию . В этом контексте инкапсуляция 
относится к процессу добавления каждым слоем заголовка (а иногда и концевика) к полученной единице данных и отправки 
«инкапсулированной» единицы на нижележащий уровень.  

Инкапсуляция — это важная концепция, поскольку она позволяет каждому слою сосредоточиться на своей предполагаемой 
функции. На изображении ниже мы имеем следующие четыре шага: 

- Данные приложения : Все начинается, когда пользователь вводит данные, которые он хочет отправить в приложение. 
- Например, вы пишете электронное письмо или мгновенное сообщение и нажимаете кнопку отправки. Приложение форматирует 
  эти данные и начинает отправлять их в соответствии с используемым протоколом приложения, используя уровень ниже, 
  транспортный уровень. 
- Сегмент транспортного протокола или датаграмма : транспортный уровень, такой как TCP или UDP , добавляет 
  соответствующую информацию заголовка и создает сегмент TCP (или датаграмму UDP ). Этот сегмент отправляется на 
  уровень ниже, сетевой уровень. 
- Сетевой пакет : сетевой уровень, т. е. уровень Интернета, добавляет заголовок IP к полученному сегменту TCP или 
  датаграмме UDP . Затем этот пакет IP отправляется на уровень ниже, канальный уровень.
- Кадр канала передачи данных : Ethernet или WiFi получает IP-пакет и добавляет соответствующий заголовок и концевик, 
  создавая кадр.

Начнем с данных приложения. На транспортном уровне мы добавляем заголовок TCP или UDP для создания сегмента TCP или 
датаграммы UDP . Опять же, на сетевом уровне мы добавляем правильный заголовок IP для получения пакета IP, который 
может быть маршрутизирован через Интернет. Наконец, мы добавляем правильный заголовок и концевик для получения кадра 
WiFi или Ethernet на канальном уровне.

Данные приложения инкапсулируются в сегмент TCP или датаграмму UDP, которая в свою очередь инкапсулируется в пакет 
IP. Пакет IP инкапсулируется в кадр канала передачи данных.

На принимающей стороне процесс должен быть выполнен в обратном порядке до тех пор, пока данные приложения не будут 
извлечены.

Жизнь пакета
На основе того, что мы изучили до сих пор, мы можем объяснить упрощенную версию жизни пакета. Давайте рассмотрим 
сценарий, в котором вы ищете комнату на TryHackMe. 

На странице поиска TryHackMe вы вводите поисковый запрос и нажимаете Enter.
Ваш веб-браузер, используя HTTPS, подготавливает HTTP- запрос и отправляет его на уровень ниже — транспортный уровень.
Уровню TCP необходимо установить соединение посредством трехстороннего рукопожатия между вашим браузером и веб-сервером TryHackMe. После установки соединения TCP он может отправить запрос HTTP, содержащий поисковый запрос. Каждый созданный сегмент TCP отправляется на уровень ниже, уровень Интернета.
Уровень IP добавляет исходный IP-адрес, т. е. ваш компьютер, и целевой IP-адрес, т. е. IP-адрес веб-сервера TryHackMe. Чтобы этот пакет достиг маршрутизатора, ваш ноутбук доставляет его на уровень ниже, канальный уровень.
В зависимости от протокола канальный уровень добавляет соответствующий заголовок и концевик канального уровня, и пакет отправляется на маршрутизатор.
Маршрутизатор удаляет заголовок и концевик канального уровня, проверяет IP-адрес назначения, среди других полей, и направляет пакет по правильному каналу. Каждый маршрутизатор повторяет этот процесс, пока не достигнет маршрутизатора целевого сервера.
Затем шаги будут обратными, когда пакет достигнет маршрутизатора сети назначения. По мере того, как мы рассмотрим дополнительные протоколы, мы вернемся к этому упражнению и создадим более подробную версию.

### Ответьте на вопросы ниже
Во что будет инкапсулирован IP-пакет в сети WiFi?
```commandline
Frame
```
Как называется блок данных UDP, инкапсулирующий данные приложения?
```commandline
Datagram
```
Как называется блок данных, который инкапсулирует данные приложения, отправляемые по протоколу TCP?
```commandline
Segment
```

## Задание 7
Нажмите кнопку Start AttackBox вверху; нажмите кнопку Start VM справа, чтобы запустить присоединенную виртуальную машину ( VM ). Дайте им около 2 минут, чтобы правильно загрузиться. Как только обе машины будут готовы, нам нужно запустить терминал на AttackBox, чтобы поэкспериментировать с telnet.

Протокол TELNET (Teletype Network) — это сетевой протокол для удаленного терминального соединения. Проще говоря, telnetклиент TELNET позволяет подключаться и взаимодействовать с удаленной системой, а также выполнять текстовые команды. Хотя изначально он использовался для удаленного администрирования, мы можем использовать его telnetдля подключения к любому серверу, прослушивающему номер порта TCP .

На целевой виртуальной машине запущены разные службы. Мы поэкспериментируем с тремя из них:

- Эхо-сервер: Этот сервер повторяет все, что вы ему отправляете. По умолчанию он слушает на порту 7.
- Дневной сервер: этот сервер по умолчанию прослушивает порт 13 и отвечает текущим днем и временем.
- Веб-сервер ( HTTP ): этот сервер по умолчанию прослушивает TCP- порт 80 и обслуживает веб-страницы.
Прежде чем продолжить, следует отметить, что эхо- и дневные серверы считаются рисками безопасности и не должны запускаться; однако мы запустили их явно, чтобы продемонстрировать связь с сервером с помощью . В терминале ниже мы подключаемся к целевой виртуальной машине на TCP-telnet порте 7 эхо-сервера. Чтобы закрыть соединение, нажмите клавиши + одновременно.CTRL]

Терминал
```commandline
user@TryHackMe$ telnet MACHINE_IP 7
telnet MACHINE_IP 7
Trying MACHINE_IP...
Connected to MACHINE_IP.
Escape character is '^]'.
Hi
Hi
How are you?
How are you?
Bye
Bye
^]

telnet> quit
Connection closed.
```
В терминале ниже мы используем telnetдля подключения к дневному серверу, прослушивающему порт 13. Мы заметили, что соединение закрывается после возврата текущей даты и времени.

Терминал
```commandline
user@TryHackMe$ telnet MACHINE_IP 13
Trying MACHINE_IP...
Connected to MACHINE_IP.
Escape character is '^]'.
Thu Jun 20 12:36:32 PM UTC 2024
Connection closed by foreign host.
```
Наконец, давайте запросим веб-страницу с помощью telnet. После подключения к порту 80 вам нужно выполнить команду и указать хост, куда все отправляется, например . Вывод ниже показывает обмен. (Страница была отредактирована.)GET / HTTP/1.1Host: telnet.thm

Примечание : Возможно, вам придется нажать кнопку Enterпосле отправки информации, если вы не получите ответа.

Терминал
```commandline
user@TryHackMe$ telnet MACHINE_IP 80
Trying MACHINE_IP...
Connected to MACHINE_IP.
Escape character is '^]'.
GET / HTTP/1.1
Host: telnet.thm

HTTP/1.1 200 OK
Content-Type: text/html
[...]
```

Connection closed by foreign host.
### Ответьте на вопросы ниже
Используйте telnet для подключения к веб-серверу на MACHINE_IP. Каково имя и версия HTTP-сервера?
```commandline
lighttpd/1.4.63
```
Какой флаг вы получили при просмотре страницы?
```commandline
THM{TELNET_MASTER}
```

## Задание 8
В этой комнате мы рассмотрели модели ISO OSI и TCP/IP, сравнив и противопоставив их. Мы также рассмотрели IP-адреса и подсети, кратко объяснив маршрутизацию. Кроме того, после погружения в TCP и UDP мы объяснили инкапсуляцию. В демонстрационных целях мы telnet«общались» с разными серверами по TCP .

Теперь, когда вы закончили курс «Концепции сетевых технологий», пришло время перейти к курсу «Основы сетевых технологий» .

#### Ответьте на вопросы ниже
Пожалуйста, обратите внимание и запомните все концепции, сетевые уровни и протоколы, описанные в этой комнате.
```commandline
Ответ не нужен
```

[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)