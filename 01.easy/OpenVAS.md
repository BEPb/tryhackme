[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)

# Комната [OpenVAS](https://tryhackme.com/r/room/openvas) 

Всего 8 заданий:
## Задание 1
OpenVAS — приложение, используемое для сканирования конечных точек и веб-приложений с целью выявления и обнаружения 
уязвимостей. Обычно используется корпорациями как часть их решений по смягчению последствий для быстрого выявления 
любых пробелов в их производственных или даже разрабатываемых серверах или приложениях. Это не решение для всех, но 
может помочь избавиться от любых распространенных уязвимостей, которые могли проскользнуть сквозь щели.

Из репозитория OpenVAS GitHub «Это сканер оценки уязвимостей Open Vulnerability Assessment Scanner (OpenVAS) решения 
Greenbone Vulnerability Management (GVM). Он используется для устройств Greenbone Security Manager и представляет 
собой полнофункциональный сканирующий механизм, который выполняет постоянно обновляемый и расширенный поток тестов 
на уязвимости сети (NVT)».   


### Ответьте на вопросы ниже
Прочитать введение
```commandline
Ответ не нужен
```

## Задание 2
Как упоминалось ранее, OpenVAS создан на основе решения GreenBone Vulnerability Management (GVM) и является лишь 
одним из устройств, выпущенных GreenBone.  

OpenVAS — это служба в рамках более крупной структуры служб, известной как Greenbone Vulnerability Management (GVM). 
В этой задаче мы разберем службы, составляющие структуру, и их роли.  

Выше представлен краткий визуальный анализ того, как выглядит фреймворк GVM. Существует множество компонентов, 
которые являются частью архитектуры фреймворка GVM, но мы можем разбить его на три отдельных раздела: Front-End, 
Back-End и Vulnerability/Information feed. Эти разделы более подробно описаны ниже.  

Лента информации об уязвимостях/информации (NVT, SCAP CERT, пользовательские данные, лента сообщества)

Этот раздел будет содержать всю информацию и тесты уязвимостей, которые поступают из Greenbone Community Feed, 
которые будут основной базой для тестирования систем. Это также может включать пользовательские данные, 
предоставленные пользователем вместо Greenbone NVT и SCAP CERT.   

Серверная часть (OSP, OpenVAS, Targets)

Инфраструктура бэкэнда — это то, что фактически будет проводить все сканирование уязвимостей и обработку данных и 
NVTS через OpenVAS и GVM. Greenbone Vulnerability Manager будет посредником между сканерами и интерфейсами 
пользователя фронтэнда.   

Фронтенд (GSA, веб-интерфейсы)

Это то, с чем вы взаимодействуете, когда переходите в OpenVAS в своем браузере. Веб-интерфейсы построены на основе 
Greenbone Security Assistant и облегчают жизнь аналитику или оператору при работе с OpenVAS или другими формами 
сканеров через GVM.  

Более подробную информацию об архитектуре фреймворка GVM можно найти на этом форуме:  https://community.greenbone.net/t/about-gvm-10-architecture/1231 .

### Ответьте на вопросы ниже
Ознакомьтесь с архитектурой GVM и переходите к настройке OpenVAS
```commandline
Ответ не нужен
```

## Задание 3
Примечание : OpenVAS не предназначен для установки на AttackBox.

Процедура установки OpenVAS может различаться в зависимости от того, как вы решите установить. Вы можете установить 
из репозиториев Kali/OpenVAS, установить из исходного кода или запустить из контейнера Docker. Для наших целей 
предпочтительным методом является запуск внутри контейнера Docker, поскольку нам не нужно беспокоиться о многих 
настройках или ошибках, с которыми мы можем столкнуться при других методах установки.   


Вариант 1. Установка из репозиториев Kali/OpenVAS.

Установка из репозиториев иногда может быть очень простой или очень болезненной. Для OpenVAS установка варьируется 
по сложности и может потребовать много конфигураций. Для получения дополнительной информации об этой опции 
ознакомьтесь с руководствами ниже.  

https://websiteforstudents.com/how-to-install-and-configure-openvas-on-ubuntu-18-04-16-04/

https://www.agix.com.au/installing-openvas-on-kali-in-2020/

Вариант 2: Установка из исходного кода

Установка из исходного кода — наименее предпочтительный вариант для новичков и наименее оптимизированный способ 
установки OpenVAS из-за предварительных условий и ошибок. Для получения дополнительной информации об установке из 
исходного кода см. INSTALL.MD .  

Вариант 3: запуск из Docker (предпочтительно)

Docker — это, безусловно, самый простой из всех трех методов установки, и для запуска клиента требуется выполнить 
только одну команду. Для этой процедуры установки вам понадобится установленный docker.  

Для получения более подробной информации об этой информационной процедуре ознакомьтесь с проектом openvas-docker на 
GitHub и DockerHub.  

1. apt install docker.io
2. docker run -d -p 443:443 --name openvas mikesplain/openvas



Эта команда одновременно вытащит контейнер docker и запустит его. Полная настройка и запуск контейнера могут занять 
несколько минут. После завершения вы можете перейти по адресу https://127.0.0.1  в предпочитаемом вами браузере, и 
OpenVAS будет настроен и готов к работе!  

Ниже приведены учетные данные по умолчанию для доступа к OpenVAS/GVM:

Имя пользователя: admin

Пароль: admin

Если вы успешно вошли в OpenVAS, вы должны увидеть панель управления, похожую на ту, что показана ниже.

### Ответьте на вопросы ниже
Прочитайте вышеизложенное и подготовьте свое окружение.
```commandline
Ответ не нужен
```

## Задание 4
Прежде чем мы сможем начать сканирование и внедрение OpenVAS в наше решение по управлению уязвимостями, нам нужно 
провести небольшое обслуживание и настройку, чтобы OpenVAS работал правильно. К счастью для нас, OpenVAS делает этот 
процесс очень простым и включает в себя мастера, чтобы сделать его простым.

Начните с перехода в Scans > Tasks и нажмите на значок фиолетовой волшебной палочки, чтобы запустить базовый мастер 
настройки. Мы рекомендуем начать сканирование, 127.0.0.1чтобы протестировать установку и убедиться, что она работает 
правильно.  

Если вы успешно перешли к мастеру, вы должны увидеть всплывающее окно, похожее на то, что показано выше. Здесь вы 
настроите начальное сканирование на вашем локальном хосте, чтобы убедиться, что все настроено правильно. 

Сканирование может занять некоторое время. Дайте OpenVAS достаточно времени для завершения сканирования, после чего 
вы увидите новую панель мониторинга и анализа ваших завершенных и текущих сканирований, как показано ниже.   

После завершения сканирования вы можете перейти в раздел «Сканирования» > «Отчеты» и нажать на только что созданный 
отчет из предыдущей задачи. 

При правильной настройке вы должны увидеть три различных уязвимости, все из которых исходят от самого OpenVAS. Это 
нормальное поведение, и его можно настроить/изменить для поддержания OpSec.  

### Ответьте на вопросы ниже
Прочитайте вышеизложенное и выполните первое сканирование!
```commandline
Ответ не нужен
```

## Задание 5
Теперь, когда мы знаем, что все работает, мы можем перейти к тонкостям OpenVAS и принципам его работы. Разверните 
машину и перейдите в Scans > Tasks, чтобы начать создание задачи для сканирования предоставленной машины. 

Создание задачи

Чтобы создать настраиваемую задачу, перейдите к значку звездочки в правом верхнем углу панели задач и выберите 
«Новая задача».  

После того, как вы выберете New Task из выпадающего списка, вы увидите большое всплывающее окно со множеством опций. 
Мы разберем каждый из разделов опций и то, для чего они могут быть использованы. 

Для этой задачи мы сосредоточимся только на Имени, Целях сканирования, Типе сканера и Конфигурации сканирования. В 
последующих задачах мы сосредоточимся на других опциях для более продвинутой конфигурации и внедрения/автоматизации. 

Имя: Позволяет задать имя, под которым сканирование будет известно внутри OpenVAS.
Сканирование целей: цели для сканирования могут включать хосты, порты и учетные данные. Чтобы создать новую цель, 
вам нужно будет следовать другому всплывающему окну, это будет рассмотрено позже в этой задаче. 
Сканер: Сканер, используемый по умолчанию, будет использовать архитектуру OpenVAS, однако вы можете установить любой 
сканер по своему выбору в меню настроек. 
Конфигурация сканирования: OpenVAS предлагает семь различных типов сканирования, которые вы можете выбрать. Они 
будут использоваться в зависимости от того, насколько вы агрессивны или какую информацию вы хотите собрать в ходе 
сканирования.  

#### Определение новой цели

Чтобы выбрать новую цель, перейдите к значку звездочки рядом с надписью «Сканировать цели» .



Выше представлено меню для настройки новой цели. Две основные опции, которые вам нужно будет настроить, это Имя и 
Хосты. Эта процедура довольно проста, а другие опции будут использоваться только в расширенных решениях по 
управлению уязвимостями. Они будут рассмотрены в последующих задачах.  



Теперь, когда мы определили область действия цели, мы можем продолжить создание задачи и начать сканирование.

После создания задачи вы вернетесь на панель сканирования, где сможете отслеживать и запускать задачу. Чтобы 
запустить задачу, перейдите к значку запуска под Действиями . 

### Ответьте на вопросы ниже
Прочитайте вышеизложенное и завершите сканирование в DVWA, чтобы протестировать сканирование удаленной инфраструктуры.

```commandline
Ответ не нужен
```
## Задание 6
OpenVAS обладает очень мощными возможностями создания отчетов и мониторинга, которые могут способствовать 
эффективному и оптимальному решению в вашем конвейере сборки или управления уязвимостями. 

Загрузите предоставленный отчет с уязвимой машины, чтобы ознакомиться с возможностями автоматизированного создания 
отчетов OpenVAS. 

Разбор отчета

Автоматизированный отчет от OpenVAS начинается с некоторой базовой информации о хосте и задаче, включая категории 
Host, Start, End и Vulnerability. Он также проверит аутентификации хоста и общую сводку открытых портов на хосте. 



После получения базовой информации о хосте и задаче OpenVAS выведет отчет о каждой из найденных уязвимостей.



На изображении выше разбивка уязвимости может дать много информации. Мы можем собрать сводку уязвимости, подробности 
обнаружения, подробности смягчения и метод обнаружения. 

Обзор непрерывного мониторинга

OpenVAS предлагает множество вариантов для непрерывного и запланированного мониторинга/управления уязвимостями. Если 
вы работаете в команде или конвейере, это может позволить вам эффективно и быстро оптимизировать ваши текущие 
решения. Примерами утилит непрерывного сканирования уязвимостей являются оповещения, расписания и агенты. Агенты 
выходят за рамки этой комнаты, но мы рассмотрим настройку расписаний и оповещений ниже.   

Создание расписаний

Чтобы начать создание расписания, перейдите в Конфигурация > Расписания и, как всегда, нажмите на значок голубой 
звезды в верхнем левом углу. Вы должны увидеть всплывающее окно, похожее на то, что показано ниже. 



Заполните основную информацию, такую как Имя, Время первого запуска, Период и т. д. После того, как вы создали 
расписание, вы можете создать новую задачу/сканирование с прикрепленным созданным расписанием. Вы можете увидеть эту 
опцию ниже.  



Оповещения о создании

Процесс создания оповещений очень похож на создание расписания, перейдите в Конфигурация > Оповещения и нажмите на 
значок синей звезды в верхнем левом углу.  Вы должны увидеть всплывающее окно, похожее на то, что показано ниже. 



Вы заметите, что здесь гораздо больше опций, чем в меню расписания, не пугайтесь, процесс очень похож и прост. 
Основные опции, о которых вам нужно будет беспокоиться, это Имя, Событие, Условие и Адрес получателя. Событие можно 
настроить на оповещение на основе статуса сканирования или при обнаружении нового NVT/уязвимости. Опция условия 
гарантирует, что ваш почтовый ящик не будет переполнен оповещениями, это можно изменить на основе серьезности или 
фильтров. Адрес получателя довольно понятен и отправит электронное письмо с оповещением на указанный адрес 
электронной почты. После создания вам снова нужно будет подключить оповещение к новой Задаче/Сканированию. Вы можете 
увидеть конкретную опцию ниже.      

### Ответьте на вопросы ниже
Прочитайте вышеизложенное и попрактикуйтесь в составлении отчетов и мониторинге.

```commandline
Ответ не нужен
```

## Задание 7
Используемые отчеты OpenVAS создаются на основе комнат на TryHackMe, используемые машины принадлежат их владельцам.

Дело 001: MS00-Что? 

В этом сценарии вы назначены на рутинный конвейер управления уязвимостями в качестве аналитика SOC . Ваш автоматизированный конвейер уже выполнил сканирование сервера, вам предстоит проанализировать и определить риск в этом отчете.

### Ответьте на вопросы ниже
Когда началось сканирование в деле 001?
```commandline
Feb 28, 00:04:46
```
Когда закончилось сканирование в деле 001?
```commandline
Feb 28, 00:21:02
```
Сколько портов открыто в Корпусе 001?
```commandline
3
```
Сколько всего уязвимостей было обнаружено в деле 001? 
```commandline
5
```
Какая из обнаруженных уязвимостей имеет наивысший уровень серьезности? (MSxx-xxx)

```commandline
MS17-010
```

Какая ОС в первую очередь подвержена этой уязвимости?


```commandline
Microsoft Windows 10 x32/x64 Edition
```

Какой рекомендуемый метод обнаружения уязвимостей?

Send the crafted SMB transaction request with fid = 0 and check the response to confirm the vulnerability.

```commandline
Ответ не нужен
```

## Задание 8
Хотите узнать больше? Существует множество руководств и блогов по OpenVAS и GVM, освещающих различные продвинутые 
темы и функции платформ. Вы можете получить много информации и технических знаний на портале руководства по 
технологиям Greenbone и форумах.  

Документацию по технологии Greenbone можно найти здесь.


Если вы хотите продолжить работу над своими знаниями по управлению уязвимостями, ознакомьтесь с оставшейся частью 
раздела по управлению уязвимостями в рамках курса «Киберзащита» на TryHackMe. 

### Ответьте на вопросы ниже
Ознакомьтесь с предоставленными ссылками и продолжайте обучение!
```commandline
Ответ не нужен
```
[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)