

[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)

# Комната [Tony the Tiger](https://tryhackme.com/r/room/tonythetiger) 

Всего 8 заданий:
## Задание 1
развертывание сейчас и продолжите следовать приведенным ниже материалам, у экземпляра будет достаточно времени для полной загрузки.

### Ответьте на вопросы ниже
Я развернул свой экземпляр!
```commandline
Ответ не нужен
```

## Задание 2
Хотя это комната в стиле CTF, поскольку подход к окончательному «рутированию» ящика является новым для TryHackMe, я 
немного объясню его и предоставлю вам возможность поэкспериментировать. Вокруг лежат флаги, которые не ориентированы 
на CVE, поэтому я все равно призываю исследовать эту комнату.  Объяснение всей теории, лежащей в ее основе, немного 
выходит за рамки этого. Однако я предоставил некоторые дополнительные материалы для чтения, которые могут помочь с 
комнатой — или оказаться интересными!

#### Что такое «сериализация»?

Сериализация в абстрактном смысле — это процесс преобразования данных, в частности «Объектов» в языках 
объектно-ориентированного программирования (ООП), таких как Java, в форматирование более низкого уровня, известное 
как «потоки байтов», где они могут храниться для последующего использования, например, в файлах, базах данных и/или 
передаваться по сети. Затем они позже преобразуются из этого «потока байтов» обратно в «Объект» более высокого 
уровня. Это окончательное преобразование известно как «Десериализация» 

#### Так что же такое «Объект»?

«Объекты» в контексте программирования можно сравнить с реальными примерами. Проще говоря, «Объект» — это просто 
вещь. «Объекты» могут содержать различные типы информации, такие как состояния или характеристики. Чтобы сопоставить 
с реальным примером... Давайте возьмем лампу.  

Лампа — это отличный «объект». Лампа может быть включена или выключена, в лампе могут быть разные типы лампочек — но 
в конечном итоге это все равно лампа. Какой тип лампочки она использует и «включена» или «выключена» лампа в данном 
случае — все это хранится в «объекте».  



Как мы можем использовать этот процесс?

Атака "сериализации" - это инъекция и/или изменение данных на этапе "потока байтов". Когда приложение впоследствии 
получает доступ к этим данным, вредоносный код может привести к серьезным последствиям... от DoS, утечки данных до 
гораздо более гнусных атак, таких как "рутирование"! Вы видите, к чему это ведет...?  

### Ответьте на вопросы ниже
Какой яркий пример «Объекта» можно использовать в реальной жизни?
```commandline
lamp
```
Какова аббревиатура возможного типа атаки, являющейся результатом атаки «сериализации»?
```commandline
dos
```
В какой формат более низкого уровня преобразуются данные в «Объектах»?
```commandline
byte streams
```

## Задание 3
Вашей первой реакцией на предъявление примера должен стать сбор информации.

### Ответьте на вопросы ниже
Какая служба работает на порту «8080»?
```commandline
Apache Tomcat/Coyote JSP engine 1.1
```
Как называется интерфейсное приложение, работающее на «8080»?
```commandline
JBoss
```

## Задание 4
Тони начал вести абсолютно беспристрастный блог о дегустации различных хлопьев! Он был бы рад, если бы вы его прочитали...

### Ответьте на вопросы ниже
Этот флаг будет иметь формат "THM{}"
```commandline
THM{Tony_Sure_Loves_Frosted_Flakes}
```

## Задание 5
Загрузите прикрепленные к этой задаче ресурсы (48,3 МБ~), нажав на значок «Загрузить» внутри этой задачи.

ИМЯ ФАЙЛА: jboss.zip (48.3MB~)

КОНТРОЛЬНАЯ СУММА MD5 :  ED2B009552080A4E0615451DB0769F8B

Прикрепленные ресурсы собраны вместе, чтобы гарантировать, что каждый сможет выполнить эксплойт. Эти ресурсы не 
являются моими собственными творениями (хотя были немного изменены для совместимости), и все права принадлежат 
соответствующим авторам, указанным в «credits.txt», а также в конце комнаты.  


Ваша задача — исследовать уязвимость CVE -2015-7501  и использовать ее для получения оболочки для экземпляра с 
помощью предоставленной полезной нагрузки и эксплойта. Может быть несколько способов сделать это... Если вы 
испытываете трудности, я написал пример того, как эта уязвимость используется для запуска приложения в Windows.  

Есть также несколько способов эксплуатации этого сервиса — я настоятельно рекомендую вам изучить их самостоятельно!

### Ответьте на вопросы ниже
Я получил ракушку.
```commandline
Ответ не нужен
```
## Задание 6
Знание структуры файловой системы и прав доступа Linux (в частности Ubuntu/Debian) ожидается. Если вы испытываете 
трудности, я настоятельно рекомендую ознакомиться с модулем Linux Fundamentals.

### Ответьте на вопросы ниже
Этот флаг имеет формат "THM{}"

```commandline
THM{50c10ad46b5793704601ecdad865eb06}
```

## Задание 7
Здесь применимы обычные ожидания загрузки в root! Он находится в /root/root.txt. Приступайте к взлому :)

### Ответьте на вопросы ниже
Последний флаг не имеет форматирования "THM{}"
```commandline
zxcvbnm123456789
```

## Задание 8
Заключительные замечания

Надеюсь, это был освежающий CTF, где классические приемы встречаются с новым контентом на THM — и все это не основано на Metasploit !

Этот тип атаки может оказаться чрезвычайно опасным - как вы, надеюсь, уже поняли. Это все еще очень реально  , поскольку  веб-приложения Java все еще используются изо дня в день. Из-за своей природы все атаки "Сериализации" выполняются на стороне сервера, и как таковые - это приводит к тому, что их очень трудно предотвратить с помощью брандмауэров / IDS / IPS.

Если у вас есть какие-либо отзывы, вопросы, проблемы или будущие идеи, которые вы хотели бы обсудить,  свяжитесь с нами в TryHackMe Discord (следуя правилу № 1)

Всего доброго и спасибо за рыбу!

~ CMNatic

Кредиты

Опять же, повторюсь, предоставленный загружаемый материал был лишь немного адаптирован для обеспечения совместимости для всех пользователей TryHackMe. Генерация и выполнение полезной нагрузки особенно сильно зависят от пользовательской среды (например, версии Java, которыми трудно управлять в Linux и т. д.)

Большое спасибо  byt3bl33d3r  за предоставление надежного доказательства концепции, а также всем участникам проекта Frohoff's Ysoserial  , который облегчает генерацию полезной нагрузки, используемой для этой CVE .

Дальнейшее чтение

Если вам интересно узнать весь процесс «сериализации» и «десериализации» и как его можно использовать, я рекомендую следующие ресурсы:

https://www.baeldung.com/java-serialization
http://frohoff.github.io/appseccali-marshalling-pickles/
https://owasp.org/www-community/vulnerabilities/Deserialization_of_untrusted_data
https://www.darkreading.com/informationweek-home/why-the-java-deserialization-bug-is-a-big-deal/d/d-id/1323237
### Ответьте на вопросы ниже
ПОКА!
```commandline
Ответ не нужен
```
[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)