[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)

# Комната [DNS in detail](https://tryhackme.com/r/room/dnsindetail) 

Всего 5 заданий:
## Задание 1
### Что такое DNS ?
DNS (система доменных имен) предоставляет нам простой способ общения с устройствами в Интернете без запоминания 
сложных чисел. Подобно тому, как у каждого дома есть уникальный адрес для отправки почты непосредственно на него, у 
каждого компьютера в Интернете есть свой собственный уникальный адрес для общения с ним, называемый IP-адресом. 
IP-адрес выглядит следующим образом 104.26.10.229, 4 набора цифр от 0 до 255, разделенных точкой. Когда вы хотите 
посетить веб-сайт, не совсем удобно запоминать этот сложный набор цифр, и именно здесь DNS может помочь. Поэтому 
вместо того, чтобы запоминать 104.26.10.229, вы можете вместо этого запомнить tryhackme.com.

### Ответить на вопросы ниже
Что означает DNS?
```commandline
Domain Name System
```

## Задание 2
### Иерархия доменов
Схема иерархии доменов, где корневой домен находится наверху, разветвляясь на несколько доменов верхнего уровня, 
которые в свою очередь разветвляются на домены второго уровня 

### TLD (домен верхнего уровня)
TLD — это самая правая часть доменного имени. Так, например, TLD tryhackme.com — это .com . Существует два типа TLD: 
gTLD (Generic Top Level) и ccTLD (Country Code Top Level Domain).Исторически gTLD предназначался для того, чтобы 
сообщать пользователю о назначении доменного имени; например, .com будет использоваться в коммерческих целях, .org — 
для организаций, .edu — для образования и .gov — для правительства. А ccTLD использовался в географических целях, 
например, .ca — для сайтов, базирующихся в Канаде, .co.uk — для сайтов, базирующихся в Соединенном Королевстве и так 
далее. Из-за такого спроса наблюдается приток новых gTLD, начиная от .online, .club, .website, .biz и многих других. 
Для полного списка из более чем 2000 TLD нажмите здесь.

### Домен второго уровня

Возьмем в качестве примера tryhackme.com, часть .com — это TLD, а tryhackme — это домен второго уровня. При 
регистрации доменного имени домен второго уровня ограничен 63 символами + TLD и может использовать только az 0-9 и 
дефисы (не может начинаться или заканчиваться дефисами или иметь последовательные дефисы).

### Поддомен

Поддомен располагается с левой стороны домена второго уровня, разделяясь точкой; например, в имени admin.tryhackme.
com часть admin является поддоменом. Имя поддомена имеет те же ограничения на создание, что и домен второго уровня, 
оно ограничено 63 символами и может использовать только az 0-9 и дефисы (не может начинаться или заканчиваться 
дефисами или иметь последовательные дефисы). Вы можете использовать несколько поддоменов, разделенных точками, для 
создания более длинных имен, таких как jupiter.servers.tryhackme.com. Но длина должна быть не более 253 символов. 
Нет ограничений на количество поддоменов, которые вы можете создать для своего доменного имени.
### Ответить на вопросы ниже
Какова максимальная длина поддомена?
```commandline
63
```
Какой из следующих символов нельзя использовать в поддомене ( 3 b _ - )?
```commandline
_
```
Какова максимальная длина доменного имени?
```commandline
253
```
К какому типу домена верхнего уровня относится .co.uk?
```commandline
ccTLD
```

## Задание 3
Типы записей DNS

DNS не только для веб-сайтов, и существует несколько типов записей DNS. Мы рассмотрим некоторые из наиболее 
распространенных, с которыми вы, вероятно, столкнетесь. 

### Запись

Эти записи преобразуются в адреса IPv4, например 104.26.10.229.

### Рекорд АААА

Эти записи преобразуются в адреса IPv6, например 2606:4700:20::681a:be5

### CNAME-запись

Эти записи разрешаются в другое доменное имя, например, интернет-магазин TryHackMe имеет поддоменное имя store.
tryhackme.com, которое возвращает запись CNAME stores.shopify.com. Затем будет сделан еще один DNS- запрос к stores.
shopify.com для определения IP-адреса.  

### Запись MX

Эти записи разрешаются в адреса серверов, которые обрабатывают электронную почту для запрашиваемого вами домена, 
например, ответ записи MX для tryhackme.com будет выглядеть примерно так: alt1.aspmx.l.google.com . Эти записи также 
содержат флаг приоритета. Он сообщает клиенту, в каком порядке пробовать серверы, это идеально подходит, если 
основной сервер выходит из строя и электронную почту необходимо отправить на резервный сервер.

### Запись TXT

Записи TXT — это свободные текстовые поля, в которых могут храниться любые текстовые данные. Записи TXT имеют 
множество применений, но некоторые из них могут быть распространены для перечисления серверов, которые имеют 
полномочия отправлять электронную почту от имени домена (это может помочь в борьбе со спамом и поддельной 
электронной почтой). Их также можно использовать для проверки права собственности на доменное имя при регистрации на 
сторонних сервисах.
### Ответить на вопросы ниже
Какой тип записи будет использоваться для указания, куда отправлять электронное письмо?
```commandline
MX
```
Какой тип записи обрабатывает адреса IPv6?
```commandline
AAAA
```

## Задание 4
Что происходит, когда вы делаете DNS- запрос

диаграмма, визуализирующая поток, описанный в тексте

Когда вы запрашиваете доменное имя, ваш компьютер сначала проверяет свой локальный кэш, чтобы узнать, искали ли вы 
этот адрес недавно; если нет, будет сделан запрос на ваш рекурсивный DNS- сервер. 

Рекурсивный DNS-сервер обычно предоставляется вашим интернет-провайдером, но вы также можете выбрать свой 
собственный. Этот сервер также имеет локальный кэш недавно просмотренных доменных имен. Если результат найден 
локально, он отправляется обратно на ваш компьютер, и ваш запрос заканчивается здесь (это обычное дело для 
популярных и часто запрашиваемых сервисов, таких как Google, Facebook, Twitter). Если запрос не может быть найден 
локально, начинается путешествие по поиску правильного ответа, начиная с корневых DNS- серверов Интернета.    

Корневые серверы действуют как DNS-хребет интернета; их задача — перенаправлять вас на правильный сервер домена 
верхнего уровня в зависимости от вашего запроса. Если, например, вы запрашиваете www.tryhackme.com , корневой сервер 
распознает домен верхнего уровня .com и направит вас на правильный сервер TLD, который работает с адресами .com.   

TLD-сервер хранит записи о том, где найти полномочный сервер для ответа на DNS-запрос. Полномочный сервер часто 
также называют сервером имен для домена. Например, сервер имен для tryhackme.com — это kip.ns.cloudflare.com и uma.
ns.cloudflare.com . Часто можно обнаружить несколько серверов имен для доменного имени, которые будут действовать 
как резервные в случае, если один из них выйдет из строя.

Авторитетный DNS- сервер — это сервер, который отвечает за хранение записей DNS для определенного доменного имени и 
на котором будут выполняться любые обновления записей DNS вашего доменного имени. В зависимости от типа записи 
запись DNS затем отправляется обратно на рекурсивный DNS- сервер, где локальная копия будет кэширована для будущих 
запросов, а затем передана обратно исходному клиенту, который сделал запрос. Все записи DNS имеют значение TTL 
(время жизни). Это значение представляет собой число в секундах, в течение которого ответ должен храниться локально, 
пока вам не придется искать его снова. Кэширование избавляет от необходимости делать запрос DNS каждый раз, когда вы 
общаетесь с сервером.      

### Ответить на вопросы ниже
Какое поле определяет, как долго должна кэшироваться запись DNS?
```commandline
TTL
```

Какой тип DNS-сервера обычно предоставляет ваш интернет-провайдер?
```commandline
recursive
```

Какой тип сервера хранит все записи домена?
```commandline
authoritative
```

## Задание 5
Используя веб-сайт справа, мы можем создавать запросы для выполнения DNS-запросов и просматривать результаты. 
Веб-сайт также покажет вам команду, которую вам нужно будет запустить на своем компьютере, если вы захотите делать 
запросы самостоятельно.  
### Ответить на вопросы ниже
Каково CNAME у shop.website.thm?
```commandline
shops.myshopify.com
```
Каково значение записи TXT для website.thm?
```commandline
THM{7012BBA60997F35A9516C2E16D2944FF}
```
Каково числовое значение приоритета для записи MX?
```commandline
30
```
Какой IP-адрес у записи A www.website.thm?
```commandline
10.10.10.10
```

[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)