[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)

# Комната [Unified Kill Chain](https://tryhackme.com/r/room/unifiedkillchain) 

Всего 9 заданий:
## Задание 1
Понимание поведения, целей и методологий киберугроз является важнейшим шагом на пути к созданию надежной защиты от киберугроз (известной как политика кибербезопасности).

В этом зале вы познакомитесь с фреймворком UKC (Unified Kill Chain), который используется для понимания того, как происходят кибератаки.

Цели обучения:
- Понимание того, почему такие фреймворки, как UKC, важны и полезны для создания эффективной позиции по кибербезопасности
- Использование UKC для понимания мотивации, методов и тактики злоумышленника
- Понимание различных фаз UKC


Узнайте, что UKC — это фреймворк, который используется для дополнения других фреймворков, таких как MITRE.
### Ответьте на вопросы ниже
Давайте продолжим с комнатой!
```commandline
Ответ не нужен
```

## Задание 2
Термин «Kill Chain», возникший в военной сфере, используется для описания различных этапов атаки. В сфере 
кибербезопасности термин «Kill Chain» используется для описания методологии/пути, которые используют злоумышленники, 
такие как хакеры или APT, для приближения к цели и ее проникновения.  

Например, сканирование злоумышленником, эксплуатация веб-уязвимости и повышение привилегий будет «Цепочкой убийств». 
Мы объясним эти этапы более подробно позже в этой комнате. 

Цель состоит в том, чтобы понять «цепочку атак» злоумышленника, чтобы можно было принять защитные меры для 
превентивной защиты системы или сорвать попытку злоумышленника. 

### Ответьте на вопросы ниже
Откуда взялся термин «Цепь убийств»?

Для этого ответа вам необходимо заполнить пропуск!: **********

```commandline
military
```

## Задание 3
Моделирование угроз в контексте кибербезопасности представляет собой ряд шагов для окончательного улучшения 
безопасности системы. Моделирование угроз заключается в выявлении риска и по сути сводится к следующему: 
- Определение того, какие системы и приложения необходимо защитить и какую функцию они выполняют в среде. Например, 
является ли система критически важной для нормальной работы и содержит ли система конфиденциальную информацию, такую 
как платежная информация или адреса?  
- Оценка уязвимостей и слабых сторон этих систем и приложений, а также того, как они могут быть потенциально 
  использованы
- Создание плана действий по защите этих систем и приложений от выявленных уязвимостей
- Внедрение политик, которые предотвращают повторное возникновение этих уязвимостей, где это возможно (например, 
внедрение жизненного цикла разработки программного обеспечения (SDLC) для приложения или обучение сотрудников 
мерам предосторожности при фишинге).  


Моделирование угроз является важной процедурой для снижения риска в системе или приложении, поскольку оно создает 
общее представление об ИТ-активах организации (актив в ИТ — это часть программного обеспечения или оборудования) и 
процедурах устранения уязвимостей.  

UKC может стимулировать моделирование угроз, поскольку структура UKC помогает выявлять потенциальные поверхности 
атак и то, как эти системы могут быть использованы. 

STRIDE, DREAD и CVSS (и это лишь некоторые из них) — все это фреймворки, специально используемые в моделировании 
угроз. Если вам интересно узнать больше, посетите комнату «Принципы безопасности» на TryHackMe. 

### Ответьте на вопросы ниже
Какой технический термин обозначает часть программного обеспечения или оборудования в сфере ИТ (информационных 
технологий)? 

```commandline
asset
```

## Задание 4
Продолжая предыдущую задачу, унифицированная цепочка уничтожения, опубликованная в 2017 году, направлена на 
дополнение ( а не конкуренцию ) другим фреймворкам цепочек уничтожения кибербезопасности, таким как ATT&CK от 
Lockheed Martin и MITRE.  

UKC утверждает, что атака состоит из 18 фаз: все от разведки до эксфильтрации данных и понимания мотивов 
злоумышленника. Эти фазы были сгруппированы в этой комнате в несколько областей фокусировки для краткости, которые 
будут подробно описаны в оставшихся задачах.  

Некоторые существенные преимущества UKC по сравнению с традиционными фреймворками kill chain кибербезопасности 
включают в себя тот факт, что он современный и чрезвычайно подробный (напоминание : официально он имеет 18 фаз, 
тогда как другие фреймворки могут иметь лишь небольшое количество).  



Преимущества унифицированной структуры Kill Chain ( UKC )	Как выглядят другие фреймворки в сравнении?
Современный (выпущен в 2017 году, обновлен в 2022 году).
Некоторые фреймворки, такие как MITRE, были выпущены в 2013 году, когда ландшафт кибербезопасности был совершенно иным.
UKC чрезвычайно подробен (18 фаз).
Другие фреймворки часто имеют небольшое количество фаз.
UKC охватывает весь процесс атаки — от разведки, эксплуатации и последующей эксплуатации, а также включает 
определение мотивации нападающего. 
Другие фреймворки охватывают ограниченное количество фаз.
UKC выделяет гораздо более реалистичный сценарий атаки. Различные этапы часто будут повторяться. Например, после 
эксплуатации машины злоумышленник начнет разведку, чтобы переключить другую систему. 
Другие фреймворки не учитывают тот факт, что злоумышленник будет переходить от одной фазы к другой во время атаки.
### Ответьте на вопросы ниже
В каком году был выпущен фреймворк Unified Kill Chain?
```commandline
2017
```
Сколько фаз включает в себя атака согласно Unified Kill Chain?
```commandline
18
```
Как называется фаза атаки, когда злоумышленник использует методы, позволяющие избежать обнаружения?
```commandline
Defense Evasion
```
Как называется фаза атаки, когда злоумышленник использует методы удаления данных из сети?
```commandline
Exfiltration
```
Как называется фаза атаки, в ходе которой злоумышленник достигает своих целей?
```commandline
Objectives
```

## Задание 5
Основная цель этой серии фаз — получение злоумышленником доступа к системе или сетевой среде.

Злоумышленник будет использовать многочисленные тактики для исследования системы на предмет потенциальных 
уязвимостей, которые могут быть использованы для захвата системы. Например, распространенной тактикой является 
использование разведки против системы для обнаружения потенциальных векторов атаки (таких как приложения и службы).  



Эта серия фаз также позволяет злоумышленнику создать форму сохранения (например, файлы или процесс, которые 
позволяют злоумышленнику подключиться к машине в любое время). Наконец, UKC учитывает тот факт, что злоумышленники 
часто используют комбинацию тактик, перечисленных выше.  

Мы рассмотрим различные этапы этого раздела UKC в заголовках ниже:

### Разведка ( MITRE Tactic TA0043 )

Эта фаза UKC описывает методы, которые противник использует для сбора информации, касающейся своей цели. Это может 
быть достигнуто с помощью пассивной и активной разведки. Информация, собранная на этой фазе, используется на всех 
последующих этапах UKC ( например, на начальном плацдарме).  

Информация, собранная на этом этапе, может включать:
- Информация о том, какие системы и службы запущены на объекте-цели, полезна на этапах создания оружия и 
  эксплуатации, описанных в этом разделе.  
- Поиск списков контактов или списков сотрудников, которые могут быть выданы за другое лицо или использованы в атаках 
  с использованием социальной инженерии или фишинга.
- Поиск потенциальных учетных данных, которые могут пригодиться на более поздних этапах, например, при повороте или 
  первоначальном доступе.
- Понимание топологии сети и других сетевых систем также может быть использовано для поворота событий. 
### Вооружение  ( MITRE Tactic TA0001 )

Эта фаза UKC описывает, как противник настраивает необходимую инфраструктуру для выполнения атаки. Например, это 
может быть настройка сервера управления и контроля или системы, способной перехватывать обратные снаряды и 
доставлять полезные нагрузки в систему.  

### Социальная инженерия ( Тактика MITRE TA0001 )

Эта фаза UKC описывает методы, которые может использовать противник для манипулирования сотрудниками с целью 
выполнения действий, которые помогут в атаке противника. Например, атака социальной инженерии может включать: 
- Заставить пользователя открыть вредоносное вложение.
- Выдача себя за веб-страницу и предоставление пользователю возможности ввести свои учетные данные.
- Позвонить или посетить цель и выдать себя за пользователя (например, запросить сброс пароля) или получить доступ к 
тем разделам сайта, к которым злоумышленник ранее не имел возможности получить доступ (например, выдав себя за 
инженера-энергетика).  
### Эксплуатация ( Тактика MITRE TA0002 ) 

Эта фаза UKC описывает, как злоумышленник использует слабости или уязвимости, присутствующие в системе. UKC 
определяет «Эксплуатацию» как злоупотребление уязвимостями для выполнения кода. Например: 
- Загрузка и выполнение обратной оболочки в веб-приложении.
- Вмешательство в работу автоматизированного скрипта в системе с целью выполнения кода.
- Использование уязвимости веб-приложения для выполнения кода в системе, в которой оно запущено.
### Упорство ( Тактика MITRE TA0003 )

Эта фаза UKC довольно короткая и простая. В частности, эта фаза UKC описывает методы, которые использует противник 
для сохранения доступа к системе, на которой он получил начальный плацдарм. Например: 
- Создание сервиса в целевой системе, который позволит злоумышленнику восстановить доступ.
- Добавление целевой системы на сервер управления и контроля, где команды могут выполняться удаленно в любое время.
- Оставление других форм бэкдоров, которые срабатывают при выполнении определенного действия в системе (например, 
- обратная оболочка будет срабатывать при входе системного администратора в систему). 

### Уклонение от защиты ( Тактика MITRE TA0005 )

Раздел "Defence Evasion" в UKC является одним из наиболее ценных этапов UKC. Этот этап специально используется для 
понимания методов, которые противник использует для обхода защитных мер, установленных в системе или сети. Например, 
это может быть:  
- Брандмауэры веб-приложений.
- Сетевые брандмауэры.
- Антивирусные системы на целевой машине.
- Системы обнаружения вторжений.

Этот этап имеет важное значение при анализе атаки, поскольку он помогает сформировать ответ и, что еще лучше, дает 
обороняющейся команде информацию о том, как они могут улучшить свои системы защиты в будущем. 

### Командование и контроль ( MITRE Tactic TA0011 )

Фаза «Командование и управление» в рамках СКК объединяет усилия противника, предпринятые на этапе «Вооружение» СКК, 
для установления связи между противником и целевой системой. 

Противник может установить командование и контроль целевой системы для достижения своих действий по целям. Например, 
противник может: 

Выполнять команды.
Кража данных, учетных данных и другой информации.
Используйте контролируемый сервер для переключения на другие системы в сети.
Поворотный ( MITRE Tactic TA0008 )

`«Pivoting»` — это метод, который злоумышленник использует для доступа к другим системам в сети, которые в противном 
случае недоступны (например, они не подвержены воздействию Интернета). Часто в сети есть много систем, которые не 
доступны напрямую и часто содержат ценные данные или имеют более слабую безопасность.  

Например, злоумышленник может получить доступ к общедоступному веб-серверу, чтобы атаковать другие системы, 
находящиеся в той же сети (но недоступные через Интернет). 

### Ответьте на вопросы ниже
Приведите пример тактики завоевания доверия с помощью электронной почты?
```commandline
Phishing
```
Выдача себя за сотрудника компании с целью сброса пароля — это форма чего?
```commandline
Social Engineering
```
На каком этапе унифицированной цепочки убийств находится создание противником инфраструктуры сервера управления и 
контроля? 
```commandline
Weaponization
```
Какой этап унифицированной цепочки атак заключается в эксплуатации уязвимости, присутствующей в системе?
```commandline
Exploitation
```
Переход из одной системы в другую является примером?
```commandline
Pivoting
```
Что означает оставить вредоносный сервис, позволяющий злоумышленнику повторно войти в систему-цель?
```commandline
Persistence
```

## Задание 6
Эта фаза следует за успешным установлением опорного пункта в целевой сети. Злоумышленник будет стремиться получить 
дополнительный доступ и привилегии к системам и данным для достижения своих целей. Злоумышленник создаст базу на 
одной из систем, которая будет выступать в качестве опорной точки, и будет использовать ее для сбора информации о 
внутренней сети.   

### Поворотный  ( MITRE Tactic TA0008 )

Получив доступ к системе, злоумышленник будет использовать ее в качестве своего промежуточного пункта и туннеля 
между своими командными операциями и сетью жертвы. Система также будет использоваться в качестве точки 
распространения всех вредоносных программ и бэкдоров на более поздних этапах.  

### Discovery ( Тактика MITRE TA0007 )
Злоумышленник раскроет информацию о системе и сети, к которой она подключена. На этом этапе база знаний будет 
создана из активных учетных записей пользователей, предоставленных разрешений, используемых приложений и 
программного обеспечения, активности веб-браузера, файлов, каталогов и сетевых ресурсов, а также конфигураций системы.  

### Повышение привилегий ( тактика MITRE TA0004 )
После сбора знаний злоумышленник попытается получить более важные разрешения в системе pivot. Он воспользуется 
информацией об учетных записях, в которых обнаружены уязвимости и неверные конфигурации, чтобы повысить свой доступ 
до одного из следующих высших уровней:  
- СИСТЕМА/ КОРЕНЬ.
- Местный администратор.
- Учетная запись пользователя с правами администратора.
- Учетная запись пользователя с определенным доступом или функциями.
### Исполнение ( Тактика MITRE TA0002 )
Здесь они развертывают свой вредоносный код, используя систему pivot в качестве своего хоста. Удаленные трояны, 
скрипты C2, вредоносные ссылки и запланированные задачи развертываются и создаются для обеспечения повторяющегося 
присутствия в системе и поддержания их настойчивости.  

### Доступ к учетным данным ( MITRE Tactic TA0006 )
Работая рука об руку с этапом повышения привилегий, злоумышленник попытается украсть имена учетных записей и пароли 
с помощью различных методов, включая кейлоггинг и сброс учетных данных. Это затрудняет их обнаружение во время атаки,
поскольку они будут использовать законные учетные данные.  

### Боковое движение ( MITRE Tactic TA0008 )

С учетными данными и повышенными привилегиями противник будет стремиться перемещаться по сети и переходить на другие 
целевые системы, чтобы достичь своей главной цели. Чем скрытнее используемая техника, тем лучше. 

### Ответьте на вопросы ниже
Как аналитик SOC, вы получаете многочисленные оповещения, указывающие на неудачные попытки входа с учетной записи 
администратора. Какую стадию цепочки атак будет пытаться достичь злоумышленник? 
```commandline
Privilege Escalation
```
Mimikatz, известный инструмент атаки, был обнаружен работающим на компьютере IT-менеджера. Какова миссия инструмента?
```commandline
Credential dumping
```

## Задание 7
Эта фаза завершает путь атаки противника на среду, где у него есть доступ к критически важным активам и где он может 
достичь своих целей атаки. Эти цели обычно направлены на компрометацию триады конфиденциальности, целостности и 
доступности (CIA).

Тактика, которую может использовать злоумышленник, может включать:
### Коллекция MITRE Tactic (TA0009)
После всей охоты за доступом и активами, противник будет стремиться собрать все ценные данные, представляющие 
интерес. Это, в свою очередь, ставит под угрозу конфиденциальность данных и приведет к следующему этапу атаки — 
Эксфильтрации. Основные целевые источники включают диски, браузеры, аудио, видео и электронную почту.  

### Эксфильтрация ( MITRE Tactic TA0010 )

Чтобы повысить уровень своей компрометации, противник будет стремиться украсть данные, которые будут упакованы с 
использованием мер шифрования и сжатия, чтобы избежать любого обнаружения. Канал C2 и туннель, развернутые на более 
ранних этапах, пригодятся в этом процессе.  

### Удар ( MITRE Tactic TA0040 )
Если злоумышленник пытается поставить под угрозу целостность и доступность активов данных, он будет манипулировать, 
прерывать или уничтожать эти активы. Целью будет нарушение бизнес- и операционных процессов, и это может включать 
удаление доступа к учетным записям, стирание дисков и шифрование данных, например, атаки с целью вымогательства, 
порчи и отказа в обслуживании ( DoS ).   

### Цели
Обладая всей мощью и доступом к системам и сети, противник будет стремиться достичь своей стратегической цели атаки.

Например, если атака была финансово мотивирована, они могут попытаться зашифровать файлы и системы с помощью 
вируса-вымогателя и потребовать плату за раскрытие данных. В других случаях злоумышленник может попытаться нанести 
ущерб репутации бизнеса, и они могут раскрыть частную и конфиденциальную информацию общественности.  

### Ответьте на вопросы ниже
При мониторинге сети в качестве аналитика SOC вы замечаете, что в сетевой активности наблюдается всплеск, и весь 
трафик исходит на неизвестный IP-адрес. Какая стадия может описать эту активность? 
```commandline
Exfiltration
```
Персональная информация (PII) была раскрыта публике противником, и ваша организация подвергается проверке из-за 
нарушения. Какая часть триады ЦРУ будет затронута этим действием? 
```commandline
Confidentiality
```

## Задание 8
Разверните статический сайт, прикрепленный к задаче. Вам нужно будет сопоставить различные действия злоумышленника с 
правильной фазой фреймворка Unified Kill Chain, чтобы раскрыть флаг. 

### Ответьте на вопросы ниже
Сопоставьте подсказку сценария с правильной фазой Unified Kill Chain, чтобы увидеть флаг в конце. Что такое флаг?
```commandline
THM{UKC_SCENARIO}
```

## Задание 9
Поздравляю с прохождением комнаты Unified Kill Chain. Надеюсь, вы понимаете, какую важную роль играют такие 
фреймворки, как UKC, в выявлении риска и потенциальном смягчении атак путем реконструкции различных шагов, 
предпринятых злоумышленником.  

Как упоминалось в этой комнате, UKC является современным расширением других фреймворков, таких как фреймворк "Cyber 
Kill Chain" компании Lockheed Martin. Если вам интересно узнать больше о фреймворках в кибербезопасности 
(настоятельно рекомендуется!), вам следует ознакомиться с этими комнатами на TryHackMe:  
- Принципы безопасности
- Основы пентестинга
- Кибер-цепочка убийств
## Ответьте на вопросы ниже
Выполните это задание, чтобы закончить комнату!
```commandline
Ответ не нужен
```

[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)