[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)

# Комната [OverlayFS - CVE-2021-3493](https://tryhackme.com/r/room/overlayfs) 

Всего 3 задания:
## Задание 1
OverlayFS — это модуль ядра Linux, который позволяет системе объединять несколько точек монтирования в одну, чтобы 
вы могли получить доступ ко всем файлам из каждой из них в пределах одной структуры каталогов. 

Часто используется живыми USB-накопителями или некоторыми другими специализированными приложениями. Одно из 
применений — иметь корневую файловую систему только для чтения, а другой раздел «наложен» на нее, чтобы приложения 
могли записывать во временную файловую систему.

Дополнительные ресурсы включены в последнее задание (Дополнительная литература), если вы хотите узнать больше об 
OverlayFS и этом эксплойте.

Баннер комнаты Максима Кагарлицкого на Unsplash

### Ответить на вопросы ниже
У меня есть очень приблизительное представление о том, что такое OverlayFS.
```commandline
Ответ не нужен
```

## Задание 2
### О уязвимости
Недавно SSD-Disclosure опубликовал доказательство концепции (и прекрасное объяснение) для эксплойта ядра Ubuntu ( 
https://ssd-disclosure.com/ssd-advisory-overlayfs-pe/ ) . 

Эта уязвимость особенно серьезна, поскольку overlayfs — это модуль ядра, который по умолчанию устанавливается на 
Ubuntu 1804 Server. 
Если система уязвима, вы можете очень легко перейти от любого пользователя к root, если вы можете запустить двоичный 
файл. 
Если на машине не установлен компилятор C, вы можете статически скомпилировать двоичный файл в другом месте и 
скопировать только двоичный файл. 

### Учетные данные для SSH
- Username: overlay
- Password: tryhackme123



Если вы используете веб-машину, откройте ее на весь экран (нажав на кнопкузначок), чтобы скопировать/вставить код 
эксплойта.

### Ответить на вопросы ниже
Разверните машину с помощью кнопки «Запустить машину» в этой задаче и подождите до 2 минут, пока виртуальная машина 
загрузится.
Какой флаг в /root/?
```commandline
Ответ не нужен
```
Подключитесь к машине по SSH, используя учетные данные, указанные в тексте задачи.
Какой флаг в /root/?
```commandline
Ответ не нужен
```
Загрузите исходный код эксплойта с сайта SSD-Disclosure здесь и сохраните его как explore.c на целевой машине.
Какой флаг в /root/?
```commandline
Ответ не нужен
```
Скомпилируйте эксплойт с помощью gcc. Если вам это покажется сложным, команда дана в подсказках.
Какой флаг в /root/?
```commandline
Ответ не нужен
```
Запустите свой скомпилированный эксплойт и получите root!
Какой флаг в /root/?
```commandline
thm{27aaa5865a52dcd4cb04c0e0a2d39404}
```

## Задание 3
Хотите узнать больше об OverlayFS?
https://yagrebu.net/unix/rpi-overlay.md  - Корневая файловая система только для чтения с overlayfs, позволяющая 
приложениям работать в обычном режиме. 

https://wiki.archlinux.org/index.php/Overlay_filesystem  — страница Arch Wiki по OverlayFS (кстати, я не использую Arch)

Хотите узнать больше об этом конкретном CVE ?
https://cve.mitre.org/cgi-bin/cvename.cgi?name= CVE -2021-3493 — запись CVE  от Mitre для этой уязвимости, которая 
включает множество дополнительных ссылок. 

https://ssd-disclosure.com/ssd-advisory-overlayfs-pe/ - Вот откуда мы взяли PoC- код, и он очень хорошо объясняет 
уязвимость. 

### Ответить на вопросы ниже
Надеюсь, вам понравилась эта короткая комната.
```commandline
Ответ не нужен
```

[>> вернуться на главную страницу](https://github.com/BEPb/tryhackme/blob/master/README.md)